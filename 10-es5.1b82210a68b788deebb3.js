function _defineProperties(l,n){for(var e=0;e<n.length;e++){var u=n[e];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}function _createClass(l,n,e){return n&&_defineProperties(l.prototype,n),e&&_defineProperties(l,e),l}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6YiX":function(l,n,e){"use strict";e.r(n);var u=e("8Y7J"),t=function l(){_classCallCheck(this,l)},a=e("pMnS"),i=e("krvq"),s=e("9AJC"),o=e("eSaN"),r=e("iInd"),c=e("SVse"),d=e("mnSs"),b=e("BksD"),p=e("MNke"),h=e("tmov"),g=e("IheW"),m=e("hFJU"),f=e("JXEQ"),v=(e("ey9i"),e("M0ag")),T=function(){function l(n,e,u,t,a,i,s){_classCallCheck(this,l),this._router=n,this.generalSubjectService=e,this.eventManager=u,this.parseLinks=t,this.principalService=a,this.pluginService=i,this.errorHandler=s,this.generalSubjects=[],this.itemsPerPage=v.b,this.page=0,this.links={last:0},this.predicate="id",this.reverse=!1}return _createClass(l,[{key:"reset",value:function(){this.page=0,this.generalSubjects=[],this.loadGeneralSubjects()}},{key:"loadPage",value:function(l){this.page=l,this.loadGeneralSubjects()}},{key:"ngOnInit",value:function(){var l=this;this.loadGeneralSubjects(),this.principalService.identity().then((function(n){l.currentAccount=n})),this.registerChangeInGeneralSubjects()}},{key:"ngOnDestroy",value:function(){this.eventManager.destroy(this.eventSubscriber)}},{key:"trackId",value:function(l,n){return n.id}},{key:"sort",value:function(){var l=[this.predicate+","+(this.reverse?"asc":"desc")];return"id"!==this.predicate&&l.push("id"),l}},{key:"registerChangeInGeneralSubjects",value:function(){var l=this;this.eventSubscriber=this.eventManager.subscribe("generalSubjectListModification",(function(n){return l.reset()}))}},{key:"loadGeneralSubjects",value:function(){var l=this;this.generalSubjectService.getAllSubjects({page:this.page,size:this.itemsPerPage,sort:this.sort()}).subscribe((function(n){return l.paginateGeneralSubjects(n.body,n.headers)}),(function(n){return l.onError(n)}))}},{key:"paginateGeneralSubjects",value:function(l,n){if(this.links=this.parseLinks.parse(n.get("link")),this.totalItems=parseInt(n.get("X-Total-Count"),10),l.length>0)for(var e=0;e<l.length;e++)this.generalSubjects.push(l[e]);else this.pluginService.alertMessage("No data found..!","warning")}},{key:"onError",value:function(l){this.errorHandler.handleError(l)}}]),l}(),y=e("+Ok4"),C=u.qb({encapsulation:2,styles:[],data:{}});function S(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"a",[["class","btn btn-outline-success mr-1 mb-1"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t),t}),null,null)),u.rb(1,671744,null,0,r.n,[r.k,r.a,c.j],{routerLink:[0,"routerLink"]},null),u.Fb(2,3),(l()(),u.Mb(-1,null,[" Publish "]))],(function(l,n){var e=l(n,2,0,"/general-subject",n.parent.context.$implicit.id,"publish");l(n,1,0,e)}),(function(l,n){l(n,0,0,u.Eb(n,1).target,u.Eb(n,1).href)}))}function E(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"a",[["class","btn btn-outline-danger mr-1 mb-1"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,1).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t),t}),null,null)),u.rb(1,671744,null,0,r.n,[r.k,r.a,c.j],{routerLink:[0,"routerLink"]},null),u.Fb(2,3),(l()(),u.Mb(-1,null,[" Unpublish "]))],(function(l,n){var e=l(n,2,0,"/general-subject",n.parent.context.$implicit.id,"unpublish");l(n,1,0,e)}),(function(l,n){l(n,0,0,u.Eb(n,1).target,u.Eb(n,1).href)}))}function k(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,4,"div",[["class","btn btn-outline-danger mr-1 btn-icon d-flex justify-content-center align-items-center mb-1"],["tooltip","Delete general subject"]],null,[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,1).onClick()&&t),"focusin"===n&&(t=!1!==u.Eb(l,3).onMouseEnter()&&t),"mouseenter"===n&&(t=!1!==u.Eb(l,3).onMouseEnter()&&t),"focusout"===n&&(t=!1!==u.Eb(l,3).onMouseLeave()&&t),"mouseleave"===n&&(t=!1!==u.Eb(l,3).onMouseLeave()&&t),"click"===n&&(t=!1!==u.Eb(l,3).onClick()&&t),t}),null,null)),u.rb(1,16384,null,0,r.l,[r.k,r.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.Fb(2,3),u.rb(3,737280,null,0,d.b,[[2,d.d],u.k,u.j,u.g,u.q],{tooltipValue:[0,"tooltipValue"]},null),(l()(),u.sb(4,0,null,null,0,"i",[["class","fa fa-trash"]],null,null,null,null,null))],(function(l,n){var e=l(n,2,0,"/general-subject",n.parent.context.$implicit.id,"delete");l(n,1,0,e),l(n,3,0,"Delete general subject")}),null)}function j(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,25,"tr",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,1,"td",[["data-column","Subject name"]],null,null,null,null,null)),(l()(),u.Mb(2,null,["",""])),(l()(),u.sb(3,0,null,null,1,"td",[["data-column","Grade"]],null,null,null,null,null)),(l()(),u.Mb(4,null,["",""])),(l()(),u.sb(5,0,null,null,1,"td",[["data-column","Status"]],null,null,null,null,null)),(l()(),u.Mb(6,null,["",""])),(l()(),u.sb(7,0,null,null,4,"td",[["class","fixed-column"],["data-column","Update status"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,S)),u.rb(9,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,E)),u.rb(11,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(12,0,null,null,13,"td",[["class","fixed-column"],["data-column","Actions"]],null,null,null,null,null)),(l()(),u.sb(13,0,null,null,12,"div",[["class","d-flex"]],null,null,null,null,null)),(l()(),u.sb(14,0,null,null,4,"a",[["class","btn btn-outline-info mr-1 btn-icon d-flex justify-content-center align-items-center mb-1"],["tooltip","View general subject"]],[[1,"target",0],[8,"href",4]],[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,15).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t),"focusin"===n&&(t=!1!==u.Eb(l,17).onMouseEnter()&&t),"mouseenter"===n&&(t=!1!==u.Eb(l,17).onMouseEnter()&&t),"focusout"===n&&(t=!1!==u.Eb(l,17).onMouseLeave()&&t),"mouseleave"===n&&(t=!1!==u.Eb(l,17).onMouseLeave()&&t),"click"===n&&(t=!1!==u.Eb(l,17).onClick()&&t),t}),null,null)),u.rb(15,671744,null,0,r.n,[r.k,r.a,c.j],{routerLink:[0,"routerLink"]},null),u.Fb(16,3),u.rb(17,737280,null,0,d.b,[[2,d.d],u.k,u.j,u.g,u.q],{tooltipValue:[0,"tooltipValue"]},null),(l()(),u.sb(18,0,null,null,0,"i",[["class","fa fa-eye"]],null,null,null,null,null)),(l()(),u.sb(19,0,null,null,4,"a",[["class","btn btn-outline-success mr-1 btn-icon d-flex justify-content-center align-items-center mb-1"],["tooltip","Edit general subject"]],[[1,"target",0],[8,"href",4]],[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,20).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t),"focusin"===n&&(t=!1!==u.Eb(l,22).onMouseEnter()&&t),"mouseenter"===n&&(t=!1!==u.Eb(l,22).onMouseEnter()&&t),"focusout"===n&&(t=!1!==u.Eb(l,22).onMouseLeave()&&t),"mouseleave"===n&&(t=!1!==u.Eb(l,22).onMouseLeave()&&t),"click"===n&&(t=!1!==u.Eb(l,22).onClick()&&t),t}),null,null)),u.rb(20,671744,null,0,r.n,[r.k,r.a,c.j],{routerLink:[0,"routerLink"]},null),u.Fb(21,3),u.rb(22,737280,null,0,d.b,[[2,d.d],u.k,u.j,u.g,u.q],{tooltipValue:[0,"tooltipValue"]},null),(l()(),u.sb(23,0,null,null,0,"i",[["class","fa fa-edit"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,k)),u.rb(25,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,9,0,"DRAFT"===n.context.$implicit.status||"INACTIVE"===n.context.$implicit.status),l(n,11,0,"ACTIVE"===n.context.$implicit.status);var e=l(n,16,0,"/general-subject",n.context.$implicit.id,"view");l(n,15,0,e),l(n,17,0,"View general subject");var u=l(n,21,0,"/general-subject",n.context.$implicit.id,"edit");l(n,20,0,u),l(n,22,0,"Edit general subject"),l(n,25,0,"INACTIVE"===n.context.$implicit.status||"DRAFT"===n.context.$implicit.status)}),(function(l,n){l(n,2,0,n.context.$implicit.title),l(n,4,0,n.context.$implicit.grade),l(n,6,0,n.context.$implicit.status),l(n,14,0,u.Eb(n,15).target,u.Eb(n,15).href),l(n,19,0,u.Eb(n,20).target,u.Eb(n,20).href)}))}function N(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,27,"div",[["class","table-responsive"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,26,"table",[["class","table table-hover table-striped table-bordered nowrap w-100"],["id","generalSubjectsTable"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,21,"thead",[],null,null,null,null,null)),(l()(),u.sb(3,0,null,null,20,"tr",[["jhiSort",""]],null,[[null,"predicateChange"],[null,"ascendingChange"]],(function(l,n,e){var u=!0,t=l.component;return"predicateChange"===n&&(u=!1!==(t.predicate=e)&&u),"ascendingChange"===n&&(u=!1!==(t.reverse=e)&&u),u}),null,null)),u.rb(4,16384,null,0,b.i,[],{predicate:[0,"predicate"],ascending:[1,"ascending"],callback:[2,"callback"]},{predicateChange:"predicateChange",ascendingChange:"ascendingChange"}),(l()(),u.sb(5,0,null,null,4,"th",[["jhiSortBy","title"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,6).onClick()&&t),t}),null,null)),u.rb(6,1064960,null,1,b.h,[b.i,b.b],{jhiSortBy:[0,"jhiSortBy"]},null),u.Kb(335544320,1,{iconComponent:0}),(l()(),u.Mb(-1,null,["Subject Name "])),(l()(),u.sb(9,0,null,null,0,"span",[["class","fa fa-sort ml-1"]],null,null,null,null,null)),(l()(),u.sb(10,0,null,null,4,"th",[["jhiSortBy","grade"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,11).onClick()&&t),t}),null,null)),u.rb(11,1064960,null,1,b.h,[b.i,b.b],{jhiSortBy:[0,"jhiSortBy"]},null),u.Kb(335544320,2,{iconComponent:0}),(l()(),u.Mb(-1,null,["Grade"])),(l()(),u.sb(14,0,null,null,0,"span",[["class","fa fa-sort ml-1"]],null,null,null,null,null)),(l()(),u.sb(15,0,null,null,4,"th",[["jhiSortBy","status"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,16).onClick()&&t),t}),null,null)),u.rb(16,1064960,null,1,b.h,[b.i,b.b],{jhiSortBy:[0,"jhiSortBy"]},null),u.Kb(335544320,3,{iconComponent:0}),(l()(),u.Mb(-1,null,["Status "])),(l()(),u.sb(19,0,null,null,0,"span",[["class","fa fa-sort ml-1"]],null,null,null,null,null)),(l()(),u.sb(20,0,null,null,1,"th",[["class","fixed-column"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Update status"])),(l()(),u.sb(22,0,null,null,1,"th",[["class","fixed-column"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Actions"])),(l()(),u.sb(24,0,null,null,3,"tbody",[["infinite-scroll",""]],null,[[null,"scrolled"]],(function(l,n,e){var u=!0,t=l.component;return"scrolled"===n&&(u=!1!==t.loadPage(t.page+1)&&u),u}),null,null)),u.rb(25,4866048,null,0,p.a,[u.k,u.y],{infiniteScrollDistance:[0,"infiniteScrollDistance"],infiniteScrollDisabled:[1,"infiniteScrollDisabled"]},{scrolled:"scrolled"}),(l()(),u.ib(16777216,null,null,1,null,j)),u.rb(27,278528,null,0,c.l,[u.O,u.L,u.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(l,n){var e=n.component;l(n,4,0,e.predicate,e.reverse,e.reset.bind(e)),l(n,6,0,"title"),l(n,11,0,"grade"),l(n,16,0,"status"),l(n,25,0,0,e.page>=e.links.last),l(n,27,0,e.generalSubjects,e.trackId)}),null)}function x(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,6,"div",[["class","w-100 d-flex justify-content-end my-3"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,5,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t),t}),null,null)),u.rb(2,671744,null,0,r.n,[r.k,r.a,c.j],{routerLink:[0,"routerLink"]},null),u.Fb(3,2),(l()(),u.sb(4,0,null,null,2,"div",[["class","btn btn-primary"]],null,null,null,null,null)),(l()(),u.sb(5,0,null,null,0,"i",[["class","fa fa-plus-circle mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Create new subject "])),(l()(),u.ib(16777216,null,null,1,null,N)),u.rb(8,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component,u=l(n,3,0,"/general-subject","create");l(n,2,0,u),l(n,8,0,e.generalSubjects)}),(function(l,n){l(n,1,0,u.Eb(n,2).target,u.Eb(n,2).href)}))}var M=u.ob("ng-component",T,(function(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"ng-component",[],null,null,null,x,C)),u.Jb(512,null,h.a,h.a,[g.c]),u.Jb(512,null,m.a,m.a,[f.a,u.q]),u.rb(3,245760,null,0,T,[r.k,h.a,b.c,b.f,y.a,f.a,m.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),O=e("s7LF"),D=e("vX4a"),A=e("MJJn"),I=e("wTG2"),w=e("BN3N"),_=e("QHgc"),F=e("wy83"),L=function(){function l(n,e,u,t,a,i,s,o,r){_classCallCheck(this,l),this.router=n,this.formBuilder=e,this.pluginService=u,this.curriculumService=t,this.generalSubjectService=a,this.activatedRoute=i,this.commonService=s,this.changeDetectRef=o,this.errorHandler=r,this.curriculumList=[],this.conceptAndTopicTree=[],this.updatedJSONTree=[],this.nodeTypes=[],this.allGrades=[],this.grades=[],this.validateSubjectForm=!0,this.validateNode=!0,this.validateNodeForm=!0,this.enableExpandNode=!1}return _createClass(l,[{key:"getNodeTypeList",value:function(){var l=this;this.commonService.getGeneralDataList().subscribe((function(n){l.nodeTypes=n.generalSubject,l.allGrades=n.grade}))}},{key:"ngOnInit",value:function(){this.pluginService.sideMenuToggle(),this.createGeneralSubjectGroup(),this.pluginService.stepper(),this.getCurriculumList(),this.getNodeTypeList()}},{key:"createGeneralSubjectGroup",value:function(){this.generalSubjectForm=this.formBuilder.group({generalSubjectName:new O.f("",[O.y.required,O.y.minLength(3),O.y.maxLength(50)]),generalSubjectDescription:new O.f("",[O.y.minLength(3),O.y.maxLength(250)])}),this.conceptAndTopicForm=this.formBuilder.group({conceptName:new O.f(""),conceptDescription:new O.f("",[O.y.minLength(3),O.y.maxLength(250)]),topicName:new O.f(""),topicDescription:new O.f("",[O.y.minLength(3),O.y.maxLength(250)])})}},{key:"getCurriculumList",value:function(){var l=this;this.curriculumService.getStandardCurriculums().subscribe((function(n){return l.assignResponseToList(n.body)}),(function(n){return l.onError(n)}))}},{key:"assignResponseToList",value:function(l){this.curriculumList=l}},{key:"validateGeneralSubjectForm",value:function(){this.subjectName=this.trimValue(this.generalSubjectForm.value.generalSubjectName),this.subjectDescription=this.trimValue(this.generalSubjectForm.value.generalSubjectDescription),this.validateSubjectForm=!this.subjectName,this.validateSubjectForm=!this.selectedSubjectGrade,this.generalSubjectForm.invalid&&(this.validateSubjectForm=!0),this.generalSubjectForm.valid&&(this.validateSubjectForm=!1)}},{key:"loadGeneralSubjectTree",value:function(){this.generalSubjectForm.valid&&(this.conceptAndTopicTree=[{text:this.subjectName,icon:"fa fa-book",data:{name:this.subjectName,description:this.subjectDescription,baseGrade:this.selectedSubjectGrade.name,status:null,editStatus:w.b},parent:"#",type:"root"}],this.pluginService.jsTree("#buildTree",this.conceptAndTopicTree,!0),this.pluginService.jsTree("#beforeChangeTree",this.conceptAndTopicTree,!1),this.enableInstruction=!0)}},{key:"ngAfterViewInit",value:function(){this.nodeOnSelection(),this.generateJSONTreeOnDragAndDrop()}},{key:"onNodeTypeChange",value:function(){var l=[O.y.required,O.y.minLength(3),O.y.maxLength(75)];this.selectedNodeType&&(this.nodeType=this.selectedNodeType.name,"concept"===this.nodeType?(this.enableModalOperation=!0,this.conceptAndTopicForm.addControl("conceptName",new O.f("",l)),this.conceptAndTopicForm.addControl("topicName",new O.f("")),this.resetConceptAndTopicFormValues()):"topic"===this.nodeType&&(this.enableModalOperation=!0,this.conceptAndTopicForm.addControl("topicName",new O.f("",l)),this.conceptAndTopicForm.addControl("conceptName",new O.f("")),this.resetConceptAndTopicFormValues()))}},{key:"onCurriculumChange",value:function(){null==this.selectedCurriculum?null:this.generateGradeList(this.selectedCurriculum.gradesApplicableFrom,this.selectedCurriculum.gradesApplicableTo)}},{key:"generateGradeList",value:function(l,n){this.grades=[];for(var e=l;e<=n;e++)this.grades.push({id:e,name:e});return this.grades}},{key:"resetConceptAndTopicFormValues",value:function(){this.conceptAndTopicForm.reset(),this.selectedNodeType=null,this.selectedCurriculum=null,this.selectedGrade=null}},{key:"validateConceptAndTopicForm",value:function(){var l,n;l=this.trimValue(this.conceptAndTopicForm.value.conceptName),n=this.trimValue(this.conceptAndTopicForm.value.topicName),"concept"===this.nodeType?this.validateNodeForm=""===l||null==l:"topic"===this.nodeType&&(this.validateNodeForm=""===n||null==n)}},{key:"ngAfterViewChecked",value:function(){this.validateGeneralSubjectForm(),this.validateConceptAndTopicForm(),this.changeDetectRef.detectChanges()}},{key:"nodeOnSelection",value:function(){var l=this;$("#buildTree").on("changed.jstree",(function(n,e){var u,t,a;for(u=0,t=e.selected.length;u<t;u++)l.nodeType=e.node.type,"root"===l.nodeType?(l.enableNodeOperation=!0,l.enableEditNodeOperation=!1):"concept"===l.nodeType?(l.enableEditNodeOperation=!0,l.enableNodeOperation=!0,l.nodeTitle=e.node.data.name,l.nodeDescription=e.node.data.description,l.conceptAndTopicFormSetValues(l)):"topic"===l.nodeType?(l.enableNodeOperation=!0,l.enableEditNodeOperation=!0,l.nodeTitle=e.node.data.name,l.nodeDescription=e.node.data.description,null===(a=e.node.data.baseCurriculumId)?(l.selectedCurriculum=null,l.curriculum=null):l.curriculum=l.curriculumList.find((function(l){return l.id===a})).acronym,l.grade=e.node.data.baseGrade,l.conceptAndTopicFormSetValues(l)):(l.enableNodeOperation=!1,l.enableEditNodeOperation=!1)}))}},{key:"conceptAndTopicFormSetValues",value:function(l){var n,e,u;n=this.nodeTypes.findIndex((function(n){return n.name===l.nodeType})),this.selectedNodeType=this.nodeTypes[n],"concept"===l.nodeType?this.conceptAndTopicForm.setValue({conceptName:l.nodeTitle,conceptDescription:l.nodeDescription,topicName:"",topicDescription:""}):"topic"===l.nodeType&&(null==l.curriculum?(this.selectedCurriculum=null,this.selectedGrade=null):(e=this.curriculumList.findIndex((function(n){return n.acronym===l.curriculum})),this.selectedCurriculum=this.curriculumList[e],this.generateGradeList(this.curriculumList[e].gradesApplicableFrom,this.curriculumList[e].gradesApplicableTo),u=this.grades.findIndex((function(n){return n.name===l.grade})),this.selectedGrade=this.grades[u]),this.conceptAndTopicForm.setValue({conceptName:"",conceptDescription:"",topicName:l.nodeTitle,topicDescription:l.nodeDescription}))}},{key:"openConceptAndTopicModal",value:function(){this.pluginService.showModalWindow("#generalSubjectEditModal")}},{key:"closeConceptAndTopicModal",value:function(){this.pluginService.hideModalWindow("#generalSubjectEditModal")}},{key:"closeWithOutSavingNode",value:function(){var l=this;swal({title:"Are you sure to close without saving ?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",confirmButtonColor:"#32b432",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},(function(n){!0===n&&(l.closeConceptAndTopicModal(),l.disableNodeOperations())}))}},{key:"disableNodeOperations",value:function(){this.enableNodeOperation=!1,this.nodeType="",this.resetConceptAndTopicFormValues(),$("#buildTree").jstree(!0).deselect_all()}},{key:"createNode",value:function(){this.nodeOperationType="create",this.modalTitleName="Add new",this.openConceptAndTopicModal(),this.resetConceptAndTopicFormValues(),this.disableDropdown=!1,this.enableModalOperation=!1,this.selectedNodeType=null}},{key:"editNode",value:function(){this.nodeOperationType="edit",this.modalTitleName="Edit",this.disableDropdown=!0,this.conceptAndTopicForm.patchValue({conceptName:this.nodeTitle,topicName:this.nodeTitle,conceptDescription:this.nodeDescription,topicDescription:this.nodeDescription}),this.openConceptAndTopicModal(),this.enableModalOperation=!0}},{key:"saveNode",value:function(){var l,n,e,u,t,a;this.conceptAndTopicForm.valid&&(this.validateNodeForm=!1,n=$("#buildTree").jstree("get_selected")[0],u=(e=$("#buildTree").jstree(!0)).get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0}),a=e.get_selected()[0],t=u.findIndex((function(l){return l.id===a})),"create"===this.nodeOperationType?"concept"===this.nodeType?(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.conceptName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.conceptDescription),l={text:this.nodeTitle,type:"concept",state:{opened:!0,selected:!1},data:{name:this.nodeTitle,description:this.nodeDescription,orderNumber:0,status:null,editStatus:w.b,baseCurriculumId:0,baseGrade:0}},u[t].text=this.nodeTitle,$("#buildTree").jstree().create_node(n,l,"last"),u=e.get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0})):"topic"===this.nodeType&&(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.topicName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.topicDescription),l={text:this.nodeTitle,type:"topic",state:{opened:!0,selected:!1},data:{name:this.nodeTitle,description:this.nodeDescription,baseCurriculumId:null==this.selectedCurriculum?null:this.selectedCurriculum.id,baseGrade:null==this.selectedGrade?null:this.selectedGrade.id,orderNumber:0,status:null,editStatus:w.b}},u[t].text=this.nodeTitle,$("#buildTree").jstree().create_node(n,l,"last"),u=e.get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0})):"edit"===this.nodeOperationType&&(this.nodeType=u[t].type,"concept"===this.nodeType?(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.conceptName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.conceptDescription),u[t].text=this.nodeTitle,u[t].data={name:this.nodeTitle,description:this.nodeDescription,orderNumber:0,baseCurriculumId:0,baseGrade:0,status:null,editStatus:w.b}):"topic"===this.nodeType&&(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.topicName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.topicDescription),u[t].text=this.nodeTitle,u[t].data={name:this.nodeTitle,description:this.nodeDescription,baseCurriculumId:null==this.selectedCurriculum?null:this.selectedCurriculum.id,baseGrade:null==this.selectedGrade?null:this.selectedGrade.id,orderNumber:0,status:null,editStatus:w.b})),this.pluginService.jsTree("#buildTree",u,!0),this.updateJSONTreeWithOrderNum(u),e.deselect_all(),this.nodeType="",this.enableNodeOperation=!1,this.closeConceptAndTopicModal(),this.resetConceptAndTopicFormValues()),this.conceptAndTopicForm.invalid&&(this.validateNodeForm=!0)}},{key:"deleteNode",value:function(){var l,n,e;this.nodeOperationType="delete",l=(e=$("#buildTree").jstree()).get_selected()[0],e.delete_node($("#"+l)),n=$("#buildTree").jstree(!0).get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0}),this.updateJSONTreeWithOrderNum(n),this.enableNodeOperation=!1,this.nodeType="root"}},{key:"generateJSONTreeOnDragAndDrop",value:function(){var l=this;$(document).on("dnd_stop.vakata",(function(n,e){setTimeout((function(){var n=$("#buildTree").jstree(!0).get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0});l.updateJSONTreeWithOrderNum(n)}),100)}))}},{key:"trimValue",value:function(l){return null==l?l:l.trim()}},{key:"subscribeToSaveResponse",value:function(l){var n=this;l.subscribe((function(l){return n.onSaveSuccess(l)}),(function(l){return n.onSaveError(l)}))}},{key:"saveAsDraft",value:function(){this.updatedJSONTree[0].data.status=w.d,this.saveGeneralSubject()}},{key:"saveAndPublish",value:function(){this.updatedJSONTree[0].data.status=w.a,this.saveGeneralSubject()}},{key:"saveGeneralSubject",value:function(){this.subscribeToSaveResponse(this.generalSubjectService.saveGeneralSubject(this.createGeneralSubjectForm()))}},{key:"onSaveSuccess",value:function(l){this.pluginService.alertMessage("General subject saved successfully","success"),this.previousUrl(),this.resetConceptAndTopicFormValues(),this.generalSubjectForm.reset()}},{key:"onSaveError",value:function(l){this.pluginService.alertMessage("Could not save, please contact admin","error")}},{key:"createGeneralSubjectForm",value:function(){return this.updatedJSONTree}},{key:"updateJSONTreeWithOrderNum",value:function(l){this.updatedJSONTree=[],this.updatedJSONTree=l,"concept"===this.updatedJSONTree[0].type||"topic"===this.updatedJSONTree[0].type?(this.pluginService.alertMessage("More than one root element is not allowed, please remove the additional root element and proceed","error"),this.validateNode=!0):"root"===this.updatedJSONTree[0].type&&(this.validateNode=!1);for(var n=0;n<this.updatedJSONTree.length;n++)this.updatedJSONTree[n].data.orderNumber=n,delete this.updatedJSONTree[n].state,delete this.updatedJSONTree[n].a_attr,delete this.updatedJSONTree[n].li_attr,"root"!==this.updatedJSONTree[n].type&&"#"===this.updatedJSONTree[n].parent&&(this.pluginService.alertMessage("More than one root element is not allowed, please remove the additional root element and proceed","error"),this.validateNode=!0);this.pluginService.jsTree("#afterChangeTree",this.updatedJSONTree,!1)}},{key:"onError",value:function(l){this.errorHandler.handleError(l)}},{key:"toggleTreeNodes",value:function(){this.updatedJSONTree.length>1&&(this.enableExpandNode=!this.enableExpandNode,this.enableExpandNode?this.pluginService.openJsTreeAllNodes("#buildTree"):this.pluginService.closeJsTreeAllNodes("#buildTree"))}},{key:"onBack",value:function(){var l=this;swal({title:"Are you sure to go previous page ?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",confirmButtonColor:"#32b432",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},(function(n){n&&(l.previousUrl(),l.pluginService.sideMenuToggle())}))}},{key:"previousUrl",value:function(){this.router.navigateByUrl("/general-subject")}},{key:"formControl",get:function(){return this.generalSubjectForm.controls}},{key:"modalFormControl",get:function(){return this.conceptAndTopicForm.controls}}]),l}(),J=u.qb({encapsulation:2,styles:[],data:{}});function K(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Expand all "]))],null,null)}function G(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Collapse all "]))],null,null)}function V(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,5,"div",[["class","btn btn-primary mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.toggleTreeNodes()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-clone mr-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,K)),u.rb(3,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,G)),u.rb(5,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,3,0,!1===e.enableExpandNode),l(n,5,0,!0===e.enableExpandNode)}),null)}function B(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[["class","btn btn-primary mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.createNode()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-plus-circle mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Add new concept / topic "]))],null,null)}function P(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[["class","btn btn-success mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.editNode()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-edit mr-2"]],null,null,null,null,null)),(l()(),u.Mb(2,null,["Edit "," "]))],null,(function(l,n){l(n,2,0,n.component.nodeType)}))}function R(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[["class","btn btn-danger"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.deleteNode()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-trash mr-2"]],null,null,null,null,null)),(l()(),u.Mb(2,null,[" Delete "," "]))],null,(function(l,n){l(n,2,0,n.component.nodeType)}))}function U(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,6,"div",[["class","w-100 d-flex justify-content-end align-self-start mb-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,B)),u.rb(2,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,P)),u.rb(4,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,R)),u.rb(6,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,"topic"!==e.nodeType),l(n,4,0,e.enableEditNodeOperation),l(n,6,0,"root"!==e.nodeType)}),null)}function W(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept name :"])),(l()(),u.Mb(4,null,[" "," "])),(l()(),u.sb(5,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(6,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept description :"])),(l()(),u.Mb(8,null,[" ",""]))],null,(function(l,n){var e=n.component;l(n,4,0,e.nodeTitle),l(n,8,0,e.nodeDescription)}))}function q(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,16,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic name :"])),(l()(),u.Mb(4,null,[" ",""])),(l()(),u.sb(5,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(6,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic description :"])),(l()(),u.Mb(8,null,[" ",""])),(l()(),u.sb(9,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(10,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Curriculum :"])),(l()(),u.Mb(12,null,[" ",""])),(l()(),u.sb(13,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(14,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Grade :"])),(l()(),u.Mb(16,null,[" ",""]))],null,(function(l,n){var e=n.component;l(n,4,0,e.nodeTitle),l(n,8,0,e.nodeDescription),l(n,12,0,e.curriculum),l(n,16,0,e.grade)}))}function H(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,12,"div",[["class","my-2 rounded p-3 border-danger"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"p",[["class","text-danger"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["NOTE"])),(l()(),u.sb(4,0,null,null,2,"p",[["class","text-primary"]],null,null,null,null,null)),(l()(),u.sb(5,0,null,null,0,"i",[["class","fa fa-check text-danger mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Select a subject node and do your actions. "])),(l()(),u.sb(7,0,null,null,2,"p",[["class","text-primary"]],null,null,null,null,null)),(l()(),u.sb(8,0,null,null,0,"i",[["class","fa fa-check mr-2 text-danger"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Add atleast one concept or one topic for general subject creation. "])),(l()(),u.sb(10,0,null,null,2,"p",[["class","text-primary"]],null,null,null,null,null)),(l()(),u.sb(11,0,null,null,0,"i",[["class","fa fa-check mr-2 text-danger"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Only one root node is allowed, you can't drag and drop on top of root node "]))],null,null)}function Y(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,37,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,17,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept name "])),(l()(),u.sb(4,0,null,null,12,"input",[["class","form-control"],["formControlName","conceptName"],["inputRestriction","alphabetsNumbersWithMinus"],["maxlength","75"],["minlength","3"],["placeholder","Enter concept name (minlength: 3 and maxlength: 75)"],["type","text"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keypress"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,5)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,5)._compositionEnd(e.target.value)&&t),"keypress"===n&&(t=!1!==u.Eb(l,16).onKeyPress(e)&&t),t}),null,null)),u.rb(5,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(6,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(7,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(10,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(12,16384,null,0,O.p,[[4,O.o]],null,null),u.Jb(512,null,c.B,c.C,[u.r,u.s,u.k,u.D]),u.rb(14,278528,null,0,c.k,[c.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Hb(15,{"is-invalid":0}),u.rb(16,16384,null,0,D.a,[u.k],{inputRestriction:[0,"inputRestriction"]},null),(l()(),u.sb(17,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special character (-) "])),(l()(),u.sb(19,0,null,null,18,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(20,0,null,null,3,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept description "])),(l()(),u.sb(22,0,null,null,1,"span",[["class","text-muted"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["(Optional)"])),(l()(),u.sb(24,0,null,null,11,"textarea",[["class","form-control description-form"],["formControlName","conceptDescription"],["maxlength","250"],["minlength","3"],["placeholder","Enter description (minlength: 3 and maxlength: 250)"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,25)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,25).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,25)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,25)._compositionEnd(e.target.value)&&t),t}),null,null)),u.rb(25,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(26,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(27,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(30,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(32,16384,null,0,O.p,[[4,O.o]],null,null),u.Jb(512,null,c.B,c.C,[u.r,u.s,u.k,u.D]),u.rb(34,278528,null,0,c.k,[c.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Hb(35,{"is-invalid":0}),(l()(),u.sb(36,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special characters "]))],(function(l,n){var e=n.component;l(n,6,0,"3"),l(n,7,0,"75"),l(n,10,0,"conceptName");var u=l(n,15,0,e.validateNodeForm&&e.modalFormControl.conceptName.errors);l(n,14,0,"form-control",u),l(n,16,0,"alphabetsNumbersWithMinus"),l(n,26,0,"3"),l(n,27,0,"250"),l(n,30,0,"conceptDescription");var t=l(n,35,0,e.validateNodeForm&&e.modalFormControl.conceptDescription.errors);l(n,34,0,"form-control description-form",t)}),(function(l,n){l(n,4,0,u.Eb(n,6).minlength?u.Eb(n,6).minlength:null,u.Eb(n,7).maxlength?u.Eb(n,7).maxlength:null,u.Eb(n,12).ngClassUntouched,u.Eb(n,12).ngClassTouched,u.Eb(n,12).ngClassPristine,u.Eb(n,12).ngClassDirty,u.Eb(n,12).ngClassValid,u.Eb(n,12).ngClassInvalid,u.Eb(n,12).ngClassPending),l(n,24,0,u.Eb(n,26).minlength?u.Eb(n,26).minlength:null,u.Eb(n,27).maxlength?u.Eb(n,27).maxlength:null,u.Eb(n,32).ngClassUntouched,u.Eb(n,32).ngClassTouched,u.Eb(n,32).ngClassPristine,u.Eb(n,32).ngClassDirty,u.Eb(n,32).ngClassValid,u.Eb(n,32).ngClassInvalid,u.Eb(n,32).ngClassPending)}))}function X(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,83,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,17,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic name "])),(l()(),u.sb(4,0,null,null,12,"input",[["class","form-control"],["formControlName","topicName"],["inputRestriction","alphabetsNumbersWithMinus"],["maxlength","75"],["minlength","3"],["placeholder","Enter topic name (minlength: 3 and maxlength: 75)"],["type","text"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keypress"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,5)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,5)._compositionEnd(e.target.value)&&t),"keypress"===n&&(t=!1!==u.Eb(l,16).onKeyPress(e)&&t),t}),null,null)),u.rb(5,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(6,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(7,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(10,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(12,16384,null,0,O.p,[[4,O.o]],null,null),u.Jb(512,null,c.B,c.C,[u.r,u.s,u.k,u.D]),u.rb(14,278528,null,0,c.k,[c.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Hb(15,{"is-invalid":0}),u.rb(16,16384,null,0,D.a,[u.k],{inputRestriction:[0,"inputRestriction"]},null),(l()(),u.sb(17,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special character (-) "])),(l()(),u.sb(19,0,null,null,18,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(20,0,null,null,3,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic description "])),(l()(),u.sb(22,0,null,null,1,"span",[["class","text-muted"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["(Optional)"])),(l()(),u.sb(24,0,null,null,11,"textarea",[["class","form-control description-form"],["formControlName","topicDescription"],["maxlength","250"],["minlength","3"],["placeholder","Enter description(minlength: 3 and maxlength: 250)"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,25)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,25).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,25)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,25)._compositionEnd(e.target.value)&&t),t}),null,null)),u.rb(25,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(26,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(27,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(30,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(32,16384,null,0,O.p,[[4,O.o]],null,null),u.Jb(512,null,c.B,c.C,[u.r,u.s,u.k,u.D]),u.rb(34,278528,null,0,c.k,[c.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u.Hb(35,{"is-invalid":0}),(l()(),u.sb(36,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special characters "])),(l()(),u.sb(38,0,null,null,45,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(39,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Primary applicable curriculum and grade "])),(l()(),u.sb(41,0,null,null,42,"div",[["class","form-row pr-0 mr-0"]],null,null,null,null,null)),(l()(),u.sb(42,0,null,null,20,"div",[["class","col-md-6 mb-2"]],null,null,null,null,null)),(l()(),u.sb(43,0,null,null,19,"ng-select",[["bindLabel","acronym"],["class","ng-select"],["placeholder","Select curriculum"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,45).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedCurriculum=e)&&t),"change"===n&&(t=!1!==a.onCurriculumChange()&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(45,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],items:[2,"items"]},{changeEvent:"change"}),u.Kb(603979776,25,{optionTemplate:0}),u.Kb(603979776,26,{optgroupTemplate:0}),u.Kb(603979776,27,{labelTemplate:0}),u.Kb(603979776,28,{multiLabelTemplate:0}),u.Kb(603979776,29,{headerTemplate:0}),u.Kb(603979776,30,{footerTemplate:0}),u.Kb(603979776,31,{notFoundTemplate:0}),u.Kb(603979776,32,{typeToSearchTemplate:0}),u.Kb(603979776,33,{loadingTextTemplate:0}),u.Kb(603979776,34,{tagTemplate:0}),u.Kb(603979776,35,{loadingSpinnerTemplate:0}),u.Kb(603979776,36,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(59,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),u.Hb(60,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(62,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(63,0,null,null,20,"div",[["class","col-md-6 mb-2"]],null,null,null,null,null)),(l()(),u.sb(64,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["placeholder","Select grade"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,66).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedGrade=e)&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(66,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],items:[2,"items"]},null),u.Kb(603979776,37,{optionTemplate:0}),u.Kb(603979776,38,{optgroupTemplate:0}),u.Kb(603979776,39,{labelTemplate:0}),u.Kb(603979776,40,{multiLabelTemplate:0}),u.Kb(603979776,41,{headerTemplate:0}),u.Kb(603979776,42,{footerTemplate:0}),u.Kb(603979776,43,{notFoundTemplate:0}),u.Kb(603979776,44,{typeToSearchTemplate:0}),u.Kb(603979776,45,{loadingTextTemplate:0}),u.Kb(603979776,46,{tagTemplate:0}),u.Kb(603979776,47,{loadingSpinnerTemplate:0}),u.Kb(603979776,48,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(80,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),u.Hb(81,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(83,16384,null,0,O.p,[[4,O.o]],null,null)],(function(l,n){var e=n.component;l(n,6,0,"3"),l(n,7,0,"75"),l(n,10,0,"topicName");var u=l(n,15,0,e.validateNodeForm&&e.modalFormControl.topicName.errors);l(n,14,0,"form-control",u),l(n,16,0,"alphabetsNumbersWithMinus"),l(n,26,0,"3"),l(n,27,0,"250"),l(n,30,0,"topicDescription");var t=l(n,35,0,e.validateNodeForm&&e.modalFormControl.topicDescription.errors);l(n,34,0,"form-control description-form",t),l(n,45,0,"acronym","Select curriculum",e.curriculumList);var a=e.selectedCurriculum,i=l(n,60,0,!0);l(n,59,0,a,i),l(n,66,0,"name","Select grade",e.grades);var s=e.selectedGrade,o=l(n,81,0,!0);l(n,80,0,s,o)}),(function(l,n){l(n,4,0,u.Eb(n,6).minlength?u.Eb(n,6).minlength:null,u.Eb(n,7).maxlength?u.Eb(n,7).maxlength:null,u.Eb(n,12).ngClassUntouched,u.Eb(n,12).ngClassTouched,u.Eb(n,12).ngClassPristine,u.Eb(n,12).ngClassDirty,u.Eb(n,12).ngClassValid,u.Eb(n,12).ngClassInvalid,u.Eb(n,12).ngClassPending),l(n,24,0,u.Eb(n,26).minlength?u.Eb(n,26).minlength:null,u.Eb(n,27).maxlength?u.Eb(n,27).maxlength:null,u.Eb(n,32).ngClassUntouched,u.Eb(n,32).ngClassTouched,u.Eb(n,32).ngClassPristine,u.Eb(n,32).ngClassDirty,u.Eb(n,32).ngClassValid,u.Eb(n,32).ngClassInvalid,u.Eb(n,32).ngClassPending),l(n,43,1,[!u.Eb(n,45).multiple,u.Eb(n,45).typeahead,u.Eb(n,45).multiple,u.Eb(n,45).addTag,u.Eb(n,45).searchable,u.Eb(n,45).clearable,u.Eb(n,45).isOpen,u.Eb(n,45).disabled,u.Eb(n,45).filtered,u.Eb(n,62).ngClassUntouched,u.Eb(n,62).ngClassTouched,u.Eb(n,62).ngClassPristine,u.Eb(n,62).ngClassDirty,u.Eb(n,62).ngClassValid,u.Eb(n,62).ngClassInvalid,u.Eb(n,62).ngClassPending]),l(n,64,1,[!u.Eb(n,66).multiple,u.Eb(n,66).typeahead,u.Eb(n,66).multiple,u.Eb(n,66).addTag,u.Eb(n,66).searchable,u.Eb(n,66).clearable,u.Eb(n,66).isOpen,u.Eb(n,66).disabled,u.Eb(n,66).filtered,u.Eb(n,83).ngClassUntouched,u.Eb(n,83).ngClassTouched,u.Eb(n,83).ngClassPristine,u.Eb(n,83).ngClassDirty,u.Eb(n,83).ngClassValid,u.Eb(n,83).ngClassInvalid,u.Eb(n,83).ngClassPending])}))}function Q(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"div",[["class","btn btn-danger"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.resetConceptAndTopicFormValues()&&u),u}),null,null)),(l()(),u.sb(2,0,null,null,0,"i",[["class","fa fa-times mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Reset "])),(l()(),u.sb(4,0,null,null,2,"button",[["class","btn btn-success"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.saveNode()&&u),u}),null,null)),(l()(),u.sb(5,0,null,null,0,"i",[["class","fa fa-save mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Save "]))],null,(function(l,n){l(n,4,0,n.component.validateNodeForm)}))}function z(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"div",[["class","w-100 my-3 justify-content-between d-flex"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"div",[["class","btn btn-danger"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.onBack()&&u),u}),null,null)),(l()(),u.sb(2,0,null,null,0,"i",[["class","fa fa-chevron-left mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Back "])),(l()(),u.sb(4,0,null,null,129,"div",[["class","row-flex stepper"]],null,null,null,null,null)),(l()(),u.sb(5,0,null,null,15,"div",[["aria-orientation","vertical"],["class","nav flex-column nav-pills stepper-left"],["id","v-pills-tab"],["role","tablist"]],null,null,null,null,null)),(l()(),u.sb(6,0,null,null,4,"a",[["aria-controls","createSubject"],["aria-selected","false"],["class","nav-link active"],["data-toggle","pill"],["href","#createSubject"],["id","createSubject-tab"],["role","tab"]],null,null,null,null,null)),(l()(),u.sb(7,0,null,null,1,"span",[["class","index-round"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Step 1 "])),(l()(),u.sb(9,0,null,null,1,"span",[["class","step-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Create subject "])),(l()(),u.sb(11,0,null,null,4,"a",[["aria-controls","createConcept"],["aria-selected","false"],["class","nav-link disabled"],["data-toggle","pill"],["href","#createConcept"],["id","createConcept-tab"],["role","tab"]],null,null,null,null,null)),(l()(),u.sb(12,0,null,null,1,"span",[["class","index-round"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Step 2 "])),(l()(),u.sb(14,0,null,null,1,"span",[["class","step-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Create concepts and topics "])),(l()(),u.sb(16,0,null,null,4,"a",[["aria-controls","confirmation"],["aria-selected","false"],["class","nav-link disabled"],["data-toggle","pill"],["href","#confirmation"],["id","confirmation-tab"],["role","tab"]],null,null,null,null,null)),(l()(),u.sb(17,0,null,null,1,"span",[["class","index-round"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Step 3 "])),(l()(),u.sb(19,0,null,null,1,"span",[["class","step-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Summary "])),(l()(),u.sb(21,0,null,null,112,"div",[["class","stepper-right tab-content p-3"],["id","v-pills-tabContent"]],null,null,null,null,null)),(l()(),u.sb(22,0,null,null,64,"div",[["aria-labelledby","createSubject-tab"],["class","tab-pane fade show active"],["id","createSubject"],["role","tabpanel"]],null,null,null,null,null)),(l()(),u.sb(23,0,null,null,63,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var t=!0;return"submit"===n&&(t=!1!==u.Eb(l,25).onSubmit(e)&&t),"reset"===n&&(t=!1!==u.Eb(l,25).onReset()&&t),t}),null,null)),u.rb(24,16384,null,0,O.D,[],null,null),u.rb(25,540672,null,0,O.i,[[8,null],[8,null]],{form:[0,"form"]},null),u.Jb(2048,null,O.c,null,[O.i]),u.rb(27,16384,null,0,O.q,[[4,O.c]],null,null),(l()(),u.sb(28,0,null,null,14,"div",[["class","form-group mb-2 col-xxl-6"]],null,null,null,null,null)),(l()(),u.sb(29,0,null,null,1,"label",[["class","col-form-label"],["for","subjectName"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Subject name*"])),(l()(),u.sb(31,0,null,null,9,"input",[["class","form-control"],["formControlName","generalSubjectName"],["inputRestriction","alphabetsWithSpace"],["maxlength","50"],["minlength","3"],["placeholder","Enter subject name (min length: 3, max length: 50)"],["type","text"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keypress"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,32)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,32).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,32)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,32)._compositionEnd(e.target.value)&&t),"keypress"===n&&(t=!1!==u.Eb(l,40).onKeyPress(e)&&t),t}),null,null)),u.rb(32,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(33,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(34,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(37,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(39,16384,null,0,O.p,[[4,O.o]],null,null),u.rb(40,16384,null,0,D.a,[u.k],{inputRestriction:[0,"inputRestriction"]},null),(l()(),u.sb(41,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Allowed characters - Alphabets"])),(l()(),u.sb(43,0,null,null,15,"div",[["class","form-group mb-2 col-xxl-6"]],null,null,null,null,null)),(l()(),u.sb(44,0,null,null,3,"label",[["class"," col-form-label"],["for","description"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Description "])),(l()(),u.sb(46,0,null,null,1,"span",[["class","text-muted"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["(Optional)"])),(l()(),u.sb(48,0,null,null,8,"textarea",[["class","form-control description-form"],["formControlName","generalSubjectDescription"],["maxlength","250"],["minlength","3"],["name","description"],["placeholder","Enter description  (min length: 3, max length: 250)"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,49)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,49).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,49)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,49)._compositionEnd(e.target.value)&&t),t}),null,null)),u.rb(49,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(50,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(51,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(54,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(56,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(57,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special characters "])),(l()(),u.sb(59,0,null,null,22,"div",[["class","form-group mb-2 col-xxl-6"]],null,null,null,null,null)),(l()(),u.sb(60,0,null,null,1,"label",[["class"," col-form-label"],["for","description"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Grade* "])),(l()(),u.sb(62,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["placeholder","Select grade"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,64).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedSubjectGrade=e)&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(64,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],items:[2,"items"]},null),u.Kb(603979776,1,{optionTemplate:0}),u.Kb(603979776,2,{optgroupTemplate:0}),u.Kb(603979776,3,{labelTemplate:0}),u.Kb(603979776,4,{multiLabelTemplate:0}),u.Kb(603979776,5,{headerTemplate:0}),u.Kb(603979776,6,{footerTemplate:0}),u.Kb(603979776,7,{notFoundTemplate:0}),u.Kb(603979776,8,{typeToSearchTemplate:0}),u.Kb(603979776,9,{loadingTextTemplate:0}),u.Kb(603979776,10,{tagTemplate:0}),u.Kb(603979776,11,{loadingSpinnerTemplate:0}),u.Kb(603979776,12,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(78,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),u.Hb(79,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(81,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(82,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(83,0,null,null,3,"div",[["class","col-md-12 d-flex justify-content-end"]],null,null,null,null,null)),(l()(),u.sb(84,0,null,null,2,"button",[["class","btn btn-success next-step"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.loadGeneralSubjectTree()&&u),u}),null,null)),(l()(),u.Mb(-1,null,[" Next "])),(l()(),u.sb(86,0,null,null,0,"i",[["class","fa fa-arrow-right ml-2"]],null,null,null,null,null)),(l()(),u.sb(87,0,null,null,24,"div",[["aria-labelledby","createConcept-tab"],["class","tab-pane fade"],["id","createConcept"],["role","tabpanel"]],null,null,null,null,null)),(l()(),u.sb(88,0,null,null,13,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(89,0,null,null,4,"div",[["class","col-xxl-4 p-2"]],null,null,null,null,null)),(l()(),u.sb(90,0,null,null,2,"div",[["class","d-flex justify-content-start mb-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,V)),u.rb(92,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(93,0,null,null,0,"div",[["id","buildTree"]],null,null,null,null,null)),(l()(),u.sb(94,0,null,null,7,"div",[["class","col-xxl-8"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,U)),u.rb(96,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(97,0,null,null,4,"div",[["class","w-100 p-4"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,W)),u.rb(99,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,q)),u.rb(101,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,H)),u.rb(103,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(104,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(105,0,null,null,6,"div",[["class","col-md-12 d-flex justify-content-end"]],null,null,null,null,null)),(l()(),u.sb(106,0,null,null,2,"div",[["class","btn btn-danger prev-step"]],null,null,null,null,null)),(l()(),u.sb(107,0,null,null,0,"i",[["class","fa fa-arrow-left mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Previous "])),(l()(),u.sb(109,0,null,null,2,"button",[["class","btn btn-success ml-2 next-step"]],[[8,"disabled",0]],null,null,null,null)),(l()(),u.Mb(-1,null,[" Next "])),(l()(),u.sb(111,0,null,null,0,"i",[["class","fa fa-arrow-right ml-2"]],null,null,null,null,null)),(l()(),u.sb(112,0,null,null,21,"div",[["aria-labelledby","confirmation-tab"],["class","tab-pane fade"],["id","confirmation"],["role","tabpanel"]],null,null,null,null,null)),(l()(),u.sb(113,0,null,null,9,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),u.sb(114,0,null,null,8,"div",[["class","row mb-3"]],null,null,null,null,null)),(l()(),u.sb(115,0,null,null,3,"div",[["class","col-md-6"]],null,null,null,null,null)),(l()(),u.sb(116,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Before changes"])),(l()(),u.sb(118,0,null,null,0,"div",[["id","beforeChangeTree"]],null,null,null,null,null)),(l()(),u.sb(119,0,null,null,3,"div",[["class","col-md-6"]],null,null,null,null,null)),(l()(),u.sb(120,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["After changes"])),(l()(),u.sb(122,0,null,null,0,"div",[["id","afterChangeTree"]],null,null,null,null,null)),(l()(),u.sb(123,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(124,0,null,null,9,"div",[["class","col-md-12 d-flex justify-content-end"]],null,null,null,null,null)),(l()(),u.sb(125,0,null,null,2,"span",[["class","btn btn-danger mr-2 prev-step"]],null,null,null,null,null)),(l()(),u.sb(126,0,null,null,0,"i",[["class","fa fa-arrow-left mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Previous "])),(l()(),u.sb(128,0,null,null,2,"div",[["class","btn btn-info mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.saveAsDraft()&&u),u}),null,null)),(l()(),u.sb(129,0,null,null,0,"i",[["class","fa fa-save mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Save as draft "])),(l()(),u.sb(131,0,null,null,2,"div",[["class","btn btn-success"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.saveAndPublish()&&u),u}),null,null)),(l()(),u.sb(132,0,null,null,0,"i",[["class","fe fe-file-plus mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Save and publish "])),(l()(),u.sb(134,0,null,null,40,"div",[["class","modal slideInRight"],["id","generalSubjectEditModal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(l()(),u.sb(135,0,null,null,39,"div",[["class","modal-dialog modal-full-height modal-right modal-notify"],["role","document"]],null,null,null,null,null)),(l()(),u.sb(136,0,null,null,38,"div",[["class","modal-content"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var t=!0;return"submit"===n&&(t=!1!==u.Eb(l,137).onSubmit(e)&&t),"reset"===n&&(t=!1!==u.Eb(l,137).onReset()&&t),t}),null,null)),u.rb(137,540672,null,0,O.i,[[8,null],[8,null]],{form:[0,"form"]},null),u.Jb(2048,null,O.c,null,[O.i]),u.rb(139,16384,null,0,O.q,[[4,O.c]],null,null),(l()(),u.sb(140,0,null,null,4,"div",[["class","modal-header bg-warning d-flex align-items-center"]],null,null,null,null,null)),(l()(),u.sb(141,0,null,null,1,"h5",[["class","modal-title text-white"]],null,null,null,null,null)),(l()(),u.Mb(142,null,[" "," concept / topic "])),(l()(),u.sb(143,0,null,null,1,"div",[["class","close btn btn-xl"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.closeWithOutSavingNode()&&u),u}),null,null)),(l()(),u.sb(144,0,null,null,0,"i",[["class","fa fa-times"]],null,null,null,null,null)),(l()(),u.sb(145,0,null,null,27,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),u.sb(146,0,null,null,22,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(147,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Type "])),(l()(),u.sb(149,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["placeholder","Select node type"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,151).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedNodeType=e)&&t),"change"===n&&(t=!1!==a.onNodeTypeChange()&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(151,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],searchable:[2,"searchable"],items:[3,"items"]},{changeEvent:"change"}),u.Kb(603979776,13,{optionTemplate:0}),u.Kb(603979776,14,{optgroupTemplate:0}),u.Kb(603979776,15,{labelTemplate:0}),u.Kb(603979776,16,{multiLabelTemplate:0}),u.Kb(603979776,17,{headerTemplate:0}),u.Kb(603979776,18,{footerTemplate:0}),u.Kb(603979776,19,{notFoundTemplate:0}),u.Kb(603979776,20,{typeToSearchTemplate:0}),u.Kb(603979776,21,{loadingTextTemplate:0}),u.Kb(603979776,22,{tagTemplate:0}),u.Kb(603979776,23,{loadingSpinnerTemplate:0}),u.Kb(603979776,24,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(165,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),u.Hb(166,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(168,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.ib(16777216,null,null,1,null,Y)),u.rb(170,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,X)),u.rb(172,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,Q)),u.rb(174,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,25,0,e.generalSubjectForm),l(n,33,0,"3"),l(n,34,0,"50"),l(n,37,0,"generalSubjectName"),l(n,40,0,"alphabetsWithSpace"),l(n,50,0,"3"),l(n,51,0,"250"),l(n,54,0,"generalSubjectDescription"),l(n,64,0,"name","Select grade",e.allGrades);var u=e.selectedSubjectGrade,t=l(n,79,0,!0);l(n,78,0,u,t),l(n,92,0,e.updatedJSONTree.length>1),l(n,96,0,e.enableNodeOperation),l(n,99,0,"concept"===e.nodeType),l(n,101,0,"topic"===e.nodeType),l(n,103,0,e.enableInstruction),l(n,137,0,e.conceptAndTopicForm),l(n,151,0,"name","Select node type",!1,e.nodeTypes);var a=e.disableDropdown,i=e.selectedNodeType,s=l(n,166,0,!0);l(n,165,0,a,i,s),l(n,170,0,"concept"===e.nodeType),l(n,172,0,"topic"===e.nodeType),l(n,174,0,e.enableModalOperation)}),(function(l,n){var e=n.component;l(n,23,0,u.Eb(n,27).ngClassUntouched,u.Eb(n,27).ngClassTouched,u.Eb(n,27).ngClassPristine,u.Eb(n,27).ngClassDirty,u.Eb(n,27).ngClassValid,u.Eb(n,27).ngClassInvalid,u.Eb(n,27).ngClassPending),l(n,31,0,u.Eb(n,33).minlength?u.Eb(n,33).minlength:null,u.Eb(n,34).maxlength?u.Eb(n,34).maxlength:null,u.Eb(n,39).ngClassUntouched,u.Eb(n,39).ngClassTouched,u.Eb(n,39).ngClassPristine,u.Eb(n,39).ngClassDirty,u.Eb(n,39).ngClassValid,u.Eb(n,39).ngClassInvalid,u.Eb(n,39).ngClassPending),l(n,48,0,u.Eb(n,50).minlength?u.Eb(n,50).minlength:null,u.Eb(n,51).maxlength?u.Eb(n,51).maxlength:null,u.Eb(n,56).ngClassUntouched,u.Eb(n,56).ngClassTouched,u.Eb(n,56).ngClassPristine,u.Eb(n,56).ngClassDirty,u.Eb(n,56).ngClassValid,u.Eb(n,56).ngClassInvalid,u.Eb(n,56).ngClassPending),l(n,62,1,[!u.Eb(n,64).multiple,u.Eb(n,64).typeahead,u.Eb(n,64).multiple,u.Eb(n,64).addTag,u.Eb(n,64).searchable,u.Eb(n,64).clearable,u.Eb(n,64).isOpen,u.Eb(n,64).disabled,u.Eb(n,64).filtered,u.Eb(n,81).ngClassUntouched,u.Eb(n,81).ngClassTouched,u.Eb(n,81).ngClassPristine,u.Eb(n,81).ngClassDirty,u.Eb(n,81).ngClassValid,u.Eb(n,81).ngClassInvalid,u.Eb(n,81).ngClassPending]),l(n,84,0,e.validateSubjectForm),l(n,109,0,e.validateNode),l(n,136,0,u.Eb(n,139).ngClassUntouched,u.Eb(n,139).ngClassTouched,u.Eb(n,139).ngClassPristine,u.Eb(n,139).ngClassDirty,u.Eb(n,139).ngClassValid,u.Eb(n,139).ngClassInvalid,u.Eb(n,139).ngClassPending),l(n,142,0,e.modalTitleName),l(n,149,1,[!u.Eb(n,151).multiple,u.Eb(n,151).typeahead,u.Eb(n,151).multiple,u.Eb(n,151).addTag,u.Eb(n,151).searchable,u.Eb(n,151).clearable,u.Eb(n,151).isOpen,u.Eb(n,151).disabled,u.Eb(n,151).filtered,u.Eb(n,168).ngClassUntouched,u.Eb(n,168).ngClassTouched,u.Eb(n,168).ngClassPristine,u.Eb(n,168).ngClassDirty,u.Eb(n,168).ngClassValid,u.Eb(n,168).ngClassInvalid,u.Eb(n,168).ngClassPending])}))}var Z=u.ob("ng-component",L,(function(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"ng-component",[],null,null,null,z,J)),u.Jb(512,null,h.a,h.a,[g.c]),u.Jb(512,null,m.a,m.a,[f.a,u.q]),u.rb(3,12697600,null,0,L,[r.k,O.e,f.a,F.a,h.a,r.a,_.a,u.h,m.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),ll=e("mrSG"),nl=function(){function l(n,e,u,t,a,i,s,o,r){_classCallCheck(this,l),this.router=n,this.formBuilder=e,this.pluginService=u,this.curriculumService=t,this.generalSubjectService=a,this.activatedRoute=i,this.commonService=s,this.changeDetectRef=o,this.errorHandler=r,this.generalSubject=[],this.updatedJSONTree=[],this.curriculumList=[],this.nodeTypes=[],this.grades=[],this.allGrades=[],this.validateSubjectForm=!0,this.validateNode=!0,this.validateNodeForm=!0,this.enableExpandNode=!1,this.allGrades=[{id:1,name:1},{id:2,name:2},{id:3,name:3},{id:4,name:4},{id:5,name:5},{id:6,name:6},{id:7,name:7},{id:8,name:8},{id:9,name:9},{id:10,name:10},{id:11,name:11},{id:12,name:12}]}return _createClass(l,[{key:"getNodeTypeList",value:function(){var l=this;this.commonService.getGeneralDataList().subscribe((function(n){l.nodeTypes=n.generalSubject,l.allGrades=n.grade}))}},{key:"ngOnInit",value:function(){var l=this;this.pluginService.sideMenuToggle(),this.createGeneralSubjectGroup(),this.pluginService.stepper(),this.getCurriculumList(),this.getNodeTypeList(),this.activatedRoute.data.subscribe((function(n){var e=n.generalSubject;l.updateGeneralSubjectValues(e)})),this.resetConceptAndTopicFormValues()}},{key:"createGeneralSubjectGroup",value:function(){this.generalSubjectForm=this.formBuilder.group({generalSubjectName:new O.f("",[O.y.required,O.y.minLength(3),O.y.maxLength(50)]),generalSubjectDescription:new O.f("",[O.y.minLength(3),O.y.maxLength(250)])}),this.conceptAndTopicForm=this.formBuilder.group({conceptName:new O.f(""),conceptDescription:new O.f("",[O.y.minLength(3),O.y.maxLength(250)]),topicName:new O.f(""),topicDescription:new O.f("",[O.y.minLength(3),O.y.maxLength(250)])})}},{key:"getCurriculumList",value:function(){var l=this;this.curriculumService.getStandardCurriculums().subscribe((function(n){return l.assignResponseToList(n.body)}),(function(n){return l.onError(n)}))}},{key:"assignResponseToList",value:function(l){this.curriculumList=l}},{key:"updateGeneralSubjectValues",value:function(l){return ll.a(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.updateStatusForAllNodes(l),this.pluginService.jsTree("#beforeChangeTree",l,!1),this.subjectName=l[0].data.name,this.subjectDescription=l[0].data.description,this.selectedSubjectGrade=this.allGrades.filter((function(n){return n.name===l[0].data.baseGrade}))[0],this.generalSubjectForm.setValue({generalSubjectName:this.subjectName,generalSubjectDescription:this.subjectDescription});case 1:case"end":return n.stop()}}),n,this)})))}},{key:"updateStatusForAllNodes",value:function(l){for(var n=0;n<l.length;n++)l[n].data.editStatus=w.g;this.generalSubject=l,this.pluginService.jsTree("#buildTree",l,!0)}},{key:"trimValue",value:function(l){return null==l?l:l.trim()}},{key:"validateGeneralSubjectForm",value:function(){var l,n;l=this.generalSubject[0].data.name,n=this.generalSubject[0].data.description,this.subjectName=this.trimValue(this.generalSubjectForm.value.generalSubjectName),this.subjectDescription=this.trimValue(this.generalSubjectForm.value.generalSubjectDescription),this.validateSubjectForm=!this.subjectName,this.validateSubjectForm=!this.selectedSubjectGrade,this.generalSubjectForm.invalid&&(this.validateSubjectForm=!0),this.generalSubjectForm.valid&&(this.validateSubjectForm=!1),l!==this.subjectName&&(this.validateNode=!1),n!==this.subjectDescription&&(this.validateNode=!1)}},{key:"updateSubjectTree",value:function(){var l,n;this.generalSubjectForm.valid&&(l=this.trimValue(this.generalSubjectForm.value.generalSubjectName),n=this.trimValue(this.generalSubjectForm.value.generalSubjectDescription),this.generalSubject[0].text=l,this.generalSubject[0].data.name=l,this.generalSubject[0].data.description=n,this.generalSubject[0].data.baseGrade=this.selectedSubjectGrade.name,this.pluginService.jsTree("#buildTree",this.generalSubject,!0))}},{key:"ngAfterViewInit",value:function(){this.nodeOnSelection(),this.generateJSONTreeOnDragAndDrop()}},{key:"onNodeTypeChange",value:function(){var l=[O.y.required,O.y.minLength(3),O.y.maxLength(75)];this.selectedNodeType&&(this.nodeType=this.selectedNodeType.name,"concept"===this.nodeType?(this.enableModalOperation=!0,this.conceptAndTopicForm.addControl("conceptName",new O.f("",l)),this.conceptAndTopicForm.addControl("topicName",new O.f(""))):"topic"===this.nodeType&&(this.enableModalOperation=!0,this.conceptAndTopicForm.addControl("topicName",new O.f("",l)),this.conceptAndTopicForm.addControl("conceptName",new O.f(""))))}},{key:"onCurriculumChange",value:function(){null==this.selectedCurriculum?null:this.generateGradeList(this.selectedCurriculum.gradesApplicableFrom,this.selectedCurriculum.gradesApplicableTo)}},{key:"generateGradeList",value:function(l,n){this.grades=[];for(var e=l;e<=n;e++)this.grades.push({id:e,name:e});return this.grades}},{key:"resetConceptAndTopicFormValues",value:function(){this.conceptAndTopicForm.reset(),this.selectedNodeType=null,this.selectedCurriculum=null,this.selectedGrade=null}},{key:"nodeOnSelection",value:function(){var l=this;$("#buildTree").on("changed.jstree",(function(n,e){var u,t;for(u=0,t=e.selected.length;u<t;u++)l.nodeType=e.node.type,"root"===l.nodeType?(l.enableNodeOperation=!0,l.enableEditNodeOperation=!1):"concept"===l.nodeType?(l.enableEditNodeOperation=!0,l.enableNodeOperation=!0,l.nodeId=e.node.data.id,l.nodeTitle=e.node.data.name,l.nodeDescription=e.node.data.description,l.conceptAndTopicFormSetValues(l)):"topic"===l.nodeType?(l.enableNodeOperation=!0,l.enableEditNodeOperation=!0,l.nodeId=e.node.data.id,l.nodeTitle=e.node.data.name,l.nodeDescription=e.node.data.description,l.curriculumId=e.node.data.baseCurriculumId,null===l.curriculumId?(l.selectedCurriculum=null,l.curriculum=null):l.curriculum=l.curriculumList.find((function(n){return n.id===l.curriculumId})).acronym,l.grade=e.node.data.baseGrade,l.conceptAndTopicFormSetValues(l)):(l.enableNodeOperation=!1,l.enableEditNodeOperation=!1)}))}},{key:"conceptAndTopicFormSetValues",value:function(l){var n,e,u;n=this.nodeTypes.findIndex((function(n){return n.name===l.nodeType})),this.selectedNodeType=this.nodeTypes[n],"concept"===l.nodeType?this.conceptAndTopicForm.setValue({conceptName:l.nodeTitle,conceptDescription:l.nodeDescription,topicName:"",topicDescription:""}):"topic"===l.nodeType&&(null==l.curriculum?(this.selectedCurriculum=null,this.selectedGrade=null):(e=this.curriculumList.findIndex((function(n){return n.acronym===l.curriculum})),this.selectedCurriculum=this.curriculumList[e],this.generateGradeList(this.curriculumList[e].gradesApplicableFrom,this.curriculumList[e].gradesApplicableTo),u=this.grades.findIndex((function(n){return n.name===l.grade})),this.selectedGrade=this.grades[u]),this.conceptAndTopicForm.setValue({conceptName:"",conceptDescription:"",topicName:l.nodeTitle,topicDescription:l.nodeDescription}))}},{key:"validateConceptAndTopicForm",value:function(){var l,n;l=this.trimValue(this.conceptAndTopicForm.value.conceptName),n=this.trimValue(this.conceptAndTopicForm.value.topicName),"concept"===this.nodeType?this.validateNodeForm=""===l||null==l:"topic"===this.nodeType&&(this.validateNodeForm=""===n||null==n)}},{key:"ngAfterViewChecked",value:function(){this.validateGeneralSubjectForm(),this.validateConceptAndTopicForm(),this.changeDetectRef.detectChanges()}},{key:"createNode",value:function(){this.nodeOperationType="create",this.modalTitleName="Add new",this.openConceptAndTopicModal(),this.resetConceptAndTopicFormValues(),this.disableDropdown=!1,this.enableModalOperation=!1,this.selectedNodeType=null}},{key:"editNode",value:function(){this.nodeOperationType="edit",this.modalTitleName="Edit",this.disableDropdown=!0,this.conceptAndTopicForm.patchValue({conceptName:this.nodeTitle,topicName:this.nodeTitle,conceptDescription:this.nodeDescription,topicDescription:this.nodeDescription}),this.enableModalOperation=!0,this.openConceptAndTopicModal()}},{key:"loadUpdatedJsonTree",value:function(){if(!1===this.validateNode){var l=$("#buildTree").jstree(!0).get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0});this.updateJSONTreeWithOrderNum(l)}}},{key:"openConceptAndTopicModal",value:function(){this.pluginService.showModalWindow("#generalSubjectModal")}},{key:"closeConceptAndTopicModal",value:function(){this.pluginService.hideModalWindow("#generalSubjectModal")}},{key:"closeWithOutSavingNode",value:function(){var l=this;swal({title:"Are you sure to close without saving ?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",confirmButtonColor:"#32b432",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},(function(n){!0===n&&(l.closeConceptAndTopicModal(),l.disableNodeOperations())}))}},{key:"disableNodeOperations",value:function(){this.enableNodeOperation=!1,this.nodeType="",this.resetConceptAndTopicFormValues(),$("#buildTree").jstree(!0).deselect_all()}},{key:"saveNode",value:function(){var l,n,e,u,t,a,i;this.conceptAndTopicForm.valid&&(this.validateNodeForm=!1,n=$("#buildTree").jstree("get_selected")[0],u=(e=$("#buildTree").jstree(!0)).get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0}),i=e.get_selected()[0],t=u.findIndex((function(l){return l.id===i})),"create"===this.nodeOperationType&&("concept"===this.nodeType?(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.conceptName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.conceptDescription),l={text:this.nodeTitle,type:"concept",state:{opened:!0,selected:!1},data:{name:this.nodeTitle,description:this.nodeDescription,orderNumber:null,status:null,baseCurriculumId:null,baseGrade:null,editStatus:w.b}},u[t].text=this.nodeTitle,$("#buildTree").jstree().create_node(n,l,"last"),u=e.get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0})):"topic"===this.nodeType&&(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.topicName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.topicDescription),l={text:this.nodeTitle,type:"topic",state:{opened:!0,selected:!1},data:{name:this.nodeTitle,description:this.nodeDescription,baseCurriculumId:null==this.selectedCurriculum?null:this.selectedCurriculum.id,baseGrade:null==this.selectedGrade?null:this.selectedGrade.id,orderNumber:null,status:null,editStatus:w.b}},u[t].text=this.nodeTitle,$("#buildTree").jstree().create_node(n,l,"last"),u=e.get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0})),this.validateNode=!1),"edit"===this.nodeOperationType?(this.validateNode=!1,this.nodeType=u[t].type,"concept"===this.nodeType?(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.conceptName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.conceptDescription),u[t].text=this.nodeTitle,(a=u[t]).data={id:this.nodeId,name:this.nodeTitle,description:this.nodeDescription,orderNumber:null,baseCurriculumId:null,baseGrade:null,status:null,editStatus:w.e}):"topic"===this.nodeType&&(this.nodeTitle=this.trimValue(this.conceptAndTopicForm.value.topicName),this.nodeDescription=this.trimValue(this.conceptAndTopicForm.value.topicDescription),u[t].text=this.nodeTitle,(a=u[t]).data={id:this.nodeId,name:this.nodeTitle,description:this.nodeDescription,baseCurriculumId:null==this.selectedCurriculum?null:this.selectedCurriculum.id,baseGrade:null==this.selectedGrade?null:this.selectedGrade.id,orderNumber:null,status:null,editStatus:w.e})):"delete"===this.nodeOperationType&&(this.validateNode=!1,this.nodeType=u[t].type,"concept"===this.nodeType?((a=u[t]).data={id:this.nodeId,name:this.nodeTitle,description:this.nodeDescription,orderNumber:null,baseCurriculumId:null,baseGrade:null,status:null,editStatus:w.c},a.type="concept",u[t].icon="fa fa-trash",!0===e.is_parent(i)&&this.getChildrenDOM(i,u)):((a=u[t]).data={id:this.nodeId,name:this.nodeTitle,description:this.nodeDescription,orderNumber:null,baseCurriculumId:this.curriculumId,baseGrade:this.grade,status:null,editStatus:w.c},a.type="topic",u[t].icon="fa fa-trash")),this.pluginService.jsTree("#buildTree",u,!0),this.changeNodeStatus(u),e.deselect_all(),this.nodeType="",this.enableNodeOperation=!1,this.closeConceptAndTopicModal(),this.resetConceptAndTopicFormValues());this.conceptAndTopicForm.invalid&&(this.validateNodeForm=!0)}},{key:"deleteNode",value:function(){this.nodeOperationType="delete",this.saveNode()}},{key:"getChildrenDOM",value:function(l,n){var e,u,t,a,i,s,o,r,c,d=[],b=[],p=[],h=[];for(u=(e=$("#buildTree").jstree(!0)).get_children_dom(l),s=0;s<u.length;s++)if(d.push({id:u[s].id}),!0===e.is_parent(d[s]))for(t=e.get_children_dom(d[s]),o=0;o<t.length;o++){if(b.push({id:t[o].id}),!0===e.is_parent(b[o]))for(i=e.get_children_dom(b[o]),r=0;r<i.length;r++){if(p.push({id:i[r].id}),!0===e.is_parent(p[r]))for(a=e.get_children_dom(p[r]),c=0;c<a.length;c++)h.push({id:a[c].id}),this.updateDeleteStatus(h,n);this.updateDeleteStatus(p,n)}this.updateDeleteStatus(b,n)}this.updateDeleteStatus(d,n),this.updatedJSONTree=n}},{key:"updateDeleteStatus",value:function(l,n){var e,u;for(e=0;e<l.length;e++)u=n.findIndex((function(n){return n.id===l[e].id})),"concept"===n[u].type?(n[u].data={id:this.nodeId,name:this.nodeTitle,description:this.nodeDescription,orderNumber:null,baseCurriculumId:null,baseGrade:null,status:null,editStatus:w.c},n[u].type="concept",n[u].icon="fa fa-trash"):(n[u].data={id:this.nodeId,name:this.nodeTitle,description:this.nodeDescription,orderNumber:null,baseCurriculumId:this.curriculumId,baseGrade:this.grade,status:null,editStatus:w.c},n[u].type="topic",n[u].icon="fa fa-trash")}},{key:"generateJSONTreeOnDragAndDrop",value:function(){var l=this;$(document).on("dnd_stop.vakata",(function(n,e){setTimeout((function(){var n=$("#buildTree").jstree(!0).get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0});l.updateJSONTreeWithOrderNum(n)}),100)}))}},{key:"subscribeToSaveResponse",value:function(l){var n=this;l.subscribe((function(l){return n.onSaveSuccess(l)}),(function(l){return n.onError(l)}))}},{key:"onSaveSuccess",value:function(l){this.pluginService.alertMessage("General subject saved successfully","success"),this.previousUrl(),this.resetConceptAndTopicFormValues(),this.generalSubjectForm.reset()}},{key:"saveAsDraft",value:function(){this.updatedJSONTree[0].data.status=w.d,this.saveGeneralSubject(),this.resetConceptAndTopicFormValues()}},{key:"saveAndPublish",value:function(){this.updatedJSONTree[0].data.status=w.a,this.saveGeneralSubject(),this.resetConceptAndTopicFormValues()}},{key:"saveGeneralSubject",value:function(){this.subscribeToSaveResponse(this.generalSubjectService.saveGeneralSubject(this.createGeneralSubjectForm()))}},{key:"createGeneralSubjectForm",value:function(){return this.updatedJSONTree}},{key:"updateJSONTreeWithOrderNum",value:function(l){this.updatedJSONTree=[],this.updatedJSONTree=l,"concept"===this.updatedJSONTree[0].type||"topic"===this.updatedJSONTree[0].type?(this.pluginService.alertMessage("More than one root element is not allowed, please remove the additional root element and proceed","error"),this.validateNode=!0):"root"===this.updatedJSONTree[0].type&&(this.validateNode=!1);for(var n=0;n<this.updatedJSONTree.length;n++)this.updatedJSONTree[n].data.orderNumber=n,delete this.updatedJSONTree[n].state,delete this.updatedJSONTree[n].a_attr,delete this.updatedJSONTree[n].li_attr,"root"!==this.updatedJSONTree[n].type&&"#"===this.updatedJSONTree[n].parent&&(this.pluginService.alertMessage("More than one root element is not allowed, please remove the additional root element and proceed","error"),this.validateNode=!0);this.pluginService.jsTree("#afterChangeTree",this.updatedJSONTree,!1)}},{key:"changeNodeStatus",value:function(l){for(var n,e,u=0;u<l.length;u++)void 0===l[u].data.id&&(l[u].data.editStatus===w.e?l[u].data.editStatus=w.b:l[u].data.editStatus===w.c&&(n=(e=$("#buildTree").jstree(!0)).get_selected()[0],e.delete_node($("#"+n)),l=$("#buildTree").jstree(!0).get_json("#",{no_state:!0,no_li_attr:!0,no_a_attr:!0,flat:!0})));this.updateJSONTreeWithOrderNum(l)}},{key:"toggleTreeNodes",value:function(){this.enableExpandNode=!this.enableExpandNode,this.enableExpandNode?this.pluginService.openJsTreeAllNodes("#buildTree"):this.pluginService.closeJsTreeAllNodes("#buildTree")}},{key:"onError",value:function(l){this.errorHandler.handleError(l)}},{key:"previousUrl",value:function(){this.router.navigateByUrl("/general-subject")}},{key:"onBack",value:function(){var l=this;swal({title:"Are you sure to go previous page ?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",confirmButtonColor:"#32b432",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},(function(n){n&&(l.previousUrl(),l.pluginService.sideMenuToggle())}))}},{key:"formControl",get:function(){return this.generalSubjectForm.controls}},{key:"modalFormControl",get:function(){return this.conceptAndTopicForm.controls}}]),l}(),el=u.qb({encapsulation:2,styles:[],data:{}});function ul(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Expand all "]))],null,null)}function tl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Collapse all "]))],null,null)}function al(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,5,"div",[["class","btn btn-primary mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.toggleTreeNodes()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-clone mr-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,ul)),u.rb(3,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,tl)),u.rb(5,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,3,0,!1===e.enableExpandNode),l(n,5,0,!0===e.enableExpandNode)}),null)}function il(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[["class","btn btn-primary mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.createNode()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-plus-circle mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Add new concept / topic "]))],null,null)}function sl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[["class","btn btn-success mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.editNode()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-edit mr-2"]],null,null,null,null,null)),(l()(),u.Mb(2,null,["Edit "," "]))],null,(function(l,n){l(n,2,0,n.component.nodeType)}))}function ol(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,2,"div",[["class","btn btn-danger"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.deleteNode()&&u),u}),null,null)),(l()(),u.sb(1,0,null,null,0,"i",[["class","fa fa-trash mr-2"]],null,null,null,null,null)),(l()(),u.Mb(2,null,[" Delete "," "]))],null,(function(l,n){l(n,2,0,n.component.nodeType)}))}function rl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,6,"div",[["class","w-100 d-flex justify-content-end align-self-start mb-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,il)),u.rb(2,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,sl)),u.rb(4,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,ol)),u.rb(6,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,"topic"!==e.nodeType),l(n,4,0,e.enableEditNodeOperation),l(n,6,0,"root"!==e.nodeType)}),null)}function cl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept name :"])),(l()(),u.Mb(4,null,[" "," "])),(l()(),u.sb(5,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(6,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept description :"])),(l()(),u.Mb(8,null,[" ",""]))],null,(function(l,n){var e=n.component;l(n,4,0,e.nodeTitle),l(n,8,0,e.nodeDescription)}))}function dl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,16,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic name :"])),(l()(),u.Mb(4,null,[" ",""])),(l()(),u.sb(5,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(6,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic description :"])),(l()(),u.Mb(8,null,[" ",""])),(l()(),u.sb(9,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(10,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Curriculum :"])),(l()(),u.Mb(12,null,[" ",""])),(l()(),u.sb(13,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),u.sb(14,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Grade :"])),(l()(),u.Mb(16,null,[" ",""]))],null,(function(l,n){var e=n.component;l(n,4,0,e.nodeTitle),l(n,8,0,e.nodeDescription),l(n,12,0,e.curriculum),l(n,16,0,e.grade)}))}function bl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,31,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,14,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept name "])),(l()(),u.sb(4,0,null,null,9,"input",[["class","form-control"],["formControlName","conceptName"],["inputRestriction","alphabetsNumbersWithMinus"],["maxlength","75"],["minlength","3"],["placeholder","Enter concept name (min length: 3 and max length: 75)"],["type","text"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keypress"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,5)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,5)._compositionEnd(e.target.value)&&t),"keypress"===n&&(t=!1!==u.Eb(l,13).onKeyPress(e)&&t),t}),null,null)),u.rb(5,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(6,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(7,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(10,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(12,16384,null,0,O.p,[[4,O.o]],null,null),u.rb(13,16384,null,0,D.a,[u.k],{inputRestriction:[0,"inputRestriction"]},null),(l()(),u.sb(14,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special character (-) "])),(l()(),u.sb(16,0,null,null,15,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(17,0,null,null,3,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept description "])),(l()(),u.sb(19,0,null,null,1,"span",[["class","text-muted"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["(Optional)"])),(l()(),u.sb(21,0,null,null,8,"textarea",[["class","form-control description-form"],["formControlName","conceptDescription"],["maxlength","250"],["minlength","3"],["placeholder","Enter description (min length: 3 and max length: 250)"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,22)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,22).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,22)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,22)._compositionEnd(e.target.value)&&t),t}),null,null)),u.rb(22,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(23,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(24,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(27,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(29,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(30,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special characters "]))],(function(l,n){l(n,6,0,"3"),l(n,7,0,"75"),l(n,10,0,"conceptName"),l(n,13,0,"alphabetsNumbersWithMinus"),l(n,23,0,"3"),l(n,24,0,"250"),l(n,27,0,"conceptDescription")}),(function(l,n){l(n,4,0,u.Eb(n,6).minlength?u.Eb(n,6).minlength:null,u.Eb(n,7).maxlength?u.Eb(n,7).maxlength:null,u.Eb(n,12).ngClassUntouched,u.Eb(n,12).ngClassTouched,u.Eb(n,12).ngClassPristine,u.Eb(n,12).ngClassDirty,u.Eb(n,12).ngClassValid,u.Eb(n,12).ngClassInvalid,u.Eb(n,12).ngClassPending),l(n,21,0,u.Eb(n,23).minlength?u.Eb(n,23).minlength:null,u.Eb(n,24).maxlength?u.Eb(n,24).maxlength:null,u.Eb(n,29).ngClassUntouched,u.Eb(n,29).ngClassTouched,u.Eb(n,29).ngClassPristine,u.Eb(n,29).ngClassDirty,u.Eb(n,29).ngClassValid,u.Eb(n,29).ngClassInvalid,u.Eb(n,29).ngClassPending)}))}function pl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,77,"div",[],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,14,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic name "])),(l()(),u.sb(4,0,null,null,9,"input",[["class","form-control"],["formControlName","topicName"],["inputRestriction","alphabetsNumbersWithMinus"],["maxlength","75"],["minlength","3"],["placeholder","Enter topic name(min length: 3 and max length: 75)"],["type","text"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keypress"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,5)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,5).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,5)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,5)._compositionEnd(e.target.value)&&t),"keypress"===n&&(t=!1!==u.Eb(l,13).onKeyPress(e)&&t),t}),null,null)),u.rb(5,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(6,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(7,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(10,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(12,16384,null,0,O.p,[[4,O.o]],null,null),u.rb(13,16384,null,0,D.a,[u.k],{inputRestriction:[0,"inputRestriction"]},null),(l()(),u.sb(14,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special character (-) "])),(l()(),u.sb(16,0,null,null,15,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(17,0,null,null,3,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic description "])),(l()(),u.sb(19,0,null,null,1,"span",[["class","text-muted"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["(Optional)"])),(l()(),u.sb(21,0,null,null,8,"textarea",[["class","form-control description-form"],["formControlName","topicDescription"],["maxlength","250"],["minlength","3"],["placeholder","Enter description(min length: 3 and max length: 250)"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,22)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,22).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,22)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,22)._compositionEnd(e.target.value)&&t),t}),null,null)),u.rb(22,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(23,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(24,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(27,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(29,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(30,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special characters "])),(l()(),u.sb(32,0,null,null,45,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(33,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Primary applicable curriculum and grade "])),(l()(),u.sb(35,0,null,null,42,"div",[["class","form-row pr-0 mr-0"]],null,null,null,null,null)),(l()(),u.sb(36,0,null,null,20,"div",[["class","col-md-6 mb-2"]],null,null,null,null,null)),(l()(),u.sb(37,0,null,null,19,"ng-select",[["bindLabel","acronym"],["class","ng-select"],["placeholder","Select curriculum"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,39).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedCurriculum=e)&&t),"change"===n&&(t=!1!==a.onCurriculumChange()&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(39,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],items:[2,"items"]},{changeEvent:"change"}),u.Kb(603979776,25,{optionTemplate:0}),u.Kb(603979776,26,{optgroupTemplate:0}),u.Kb(603979776,27,{labelTemplate:0}),u.Kb(603979776,28,{multiLabelTemplate:0}),u.Kb(603979776,29,{headerTemplate:0}),u.Kb(603979776,30,{footerTemplate:0}),u.Kb(603979776,31,{notFoundTemplate:0}),u.Kb(603979776,32,{typeToSearchTemplate:0}),u.Kb(603979776,33,{loadingTextTemplate:0}),u.Kb(603979776,34,{tagTemplate:0}),u.Kb(603979776,35,{loadingSpinnerTemplate:0}),u.Kb(603979776,36,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(53,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),u.Hb(54,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(56,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(57,0,null,null,20,"div",[["class","col-md-6 mb-2"]],null,null,null,null,null)),(l()(),u.sb(58,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["placeholder","Select grade"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,60).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedGrade=e)&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(60,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],items:[2,"items"]},null),u.Kb(603979776,37,{optionTemplate:0}),u.Kb(603979776,38,{optgroupTemplate:0}),u.Kb(603979776,39,{labelTemplate:0}),u.Kb(603979776,40,{multiLabelTemplate:0}),u.Kb(603979776,41,{headerTemplate:0}),u.Kb(603979776,42,{footerTemplate:0}),u.Kb(603979776,43,{notFoundTemplate:0}),u.Kb(603979776,44,{typeToSearchTemplate:0}),u.Kb(603979776,45,{loadingTextTemplate:0}),u.Kb(603979776,46,{tagTemplate:0}),u.Kb(603979776,47,{loadingSpinnerTemplate:0}),u.Kb(603979776,48,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(74,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),u.Hb(75,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(77,16384,null,0,O.p,[[4,O.o]],null,null)],(function(l,n){var e=n.component;l(n,6,0,"3"),l(n,7,0,"75"),l(n,10,0,"topicName"),l(n,13,0,"alphabetsNumbersWithMinus"),l(n,23,0,"3"),l(n,24,0,"250"),l(n,27,0,"topicDescription"),l(n,39,0,"acronym","Select curriculum",e.curriculumList);var u=e.selectedCurriculum,t=l(n,54,0,!0);l(n,53,0,u,t),l(n,60,0,"name","Select grade",e.grades);var a=e.selectedGrade,i=l(n,75,0,!0);l(n,74,0,a,i)}),(function(l,n){l(n,4,0,u.Eb(n,6).minlength?u.Eb(n,6).minlength:null,u.Eb(n,7).maxlength?u.Eb(n,7).maxlength:null,u.Eb(n,12).ngClassUntouched,u.Eb(n,12).ngClassTouched,u.Eb(n,12).ngClassPristine,u.Eb(n,12).ngClassDirty,u.Eb(n,12).ngClassValid,u.Eb(n,12).ngClassInvalid,u.Eb(n,12).ngClassPending),l(n,21,0,u.Eb(n,23).minlength?u.Eb(n,23).minlength:null,u.Eb(n,24).maxlength?u.Eb(n,24).maxlength:null,u.Eb(n,29).ngClassUntouched,u.Eb(n,29).ngClassTouched,u.Eb(n,29).ngClassPristine,u.Eb(n,29).ngClassDirty,u.Eb(n,29).ngClassValid,u.Eb(n,29).ngClassInvalid,u.Eb(n,29).ngClassPending),l(n,37,1,[!u.Eb(n,39).multiple,u.Eb(n,39).typeahead,u.Eb(n,39).multiple,u.Eb(n,39).addTag,u.Eb(n,39).searchable,u.Eb(n,39).clearable,u.Eb(n,39).isOpen,u.Eb(n,39).disabled,u.Eb(n,39).filtered,u.Eb(n,56).ngClassUntouched,u.Eb(n,56).ngClassTouched,u.Eb(n,56).ngClassPristine,u.Eb(n,56).ngClassDirty,u.Eb(n,56).ngClassValid,u.Eb(n,56).ngClassInvalid,u.Eb(n,56).ngClassPending]),l(n,58,1,[!u.Eb(n,60).multiple,u.Eb(n,60).typeahead,u.Eb(n,60).multiple,u.Eb(n,60).addTag,u.Eb(n,60).searchable,u.Eb(n,60).clearable,u.Eb(n,60).isOpen,u.Eb(n,60).disabled,u.Eb(n,60).filtered,u.Eb(n,77).ngClassUntouched,u.Eb(n,77).ngClassTouched,u.Eb(n,77).ngClassPristine,u.Eb(n,77).ngClassDirty,u.Eb(n,77).ngClassValid,u.Eb(n,77).ngClassInvalid,u.Eb(n,77).ngClassPending])}))}function hl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"div",[["class","btn btn-danger"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.resetConceptAndTopicFormValues()&&u),u}),null,null)),(l()(),u.sb(2,0,null,null,0,"i",[["class","fa fa-times mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Reset "])),(l()(),u.sb(4,0,null,null,2,"button",[["class","btn btn-success"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.saveNode()&&u),u}),null,null)),(l()(),u.sb(5,0,null,null,0,"i",[["class","fa fa-save mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Save "]))],null,(function(l,n){l(n,4,0,n.component.validateNodeForm)}))}function gl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"div",[["class","col-xxl-12 justify-content-between d-flex my-3"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"div",[["class","btn btn-danger"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.onBack()&&u),u}),null,null)),(l()(),u.sb(2,0,null,null,0,"i",[["class","fa fa-chevron-left mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Back "])),(l()(),u.sb(4,0,null,null,140,"div",[["class","row-flex stepper"]],null,null,null,null,null)),(l()(),u.sb(5,0,null,null,15,"div",[["aria-orientation","vertical"],["class","nav flex-column nav-pills stepper-left"],["id","v-pills-tab"],["role","tablist"]],null,null,null,null,null)),(l()(),u.sb(6,0,null,null,4,"a",[["aria-controls","editSubject"],["aria-selected","false"],["class","nav-link active"],["data-toggle","pill"],["href","#editSubject"],["id","editSubject-tab"],["role","tab"]],null,null,null,null,null)),(l()(),u.sb(7,0,null,null,1,"span",[["class","index-round"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Step 1 "])),(l()(),u.sb(9,0,null,null,1,"span",[["class","step-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Edit subject "])),(l()(),u.sb(11,0,null,null,4,"a",[["aria-controls","manageConcept"],["aria-selected","false"],["class","nav-link disabled"],["data-toggle","pill"],["href","#manageConcept"],["id","manageConcept-tab"],["role","tab"]],null,null,null,null,null)),(l()(),u.sb(12,0,null,null,1,"span",[["class","index-round"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Step 2 "])),(l()(),u.sb(14,0,null,null,1,"span",[["class","step-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Manage concepts and topics "])),(l()(),u.sb(16,0,null,null,4,"a",[["aria-controls","confirmation"],["aria-selected","false"],["class","nav-link disabled"],["data-toggle","pill"],["href","#confirmation"],["id","confirmation-tab"],["role","tab"]],null,null,null,null,null)),(l()(),u.sb(17,0,null,null,1,"span",[["class","index-round"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Step 3 "])),(l()(),u.sb(19,0,null,null,1,"span",[["class","step-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Summary "])),(l()(),u.sb(21,0,null,null,123,"div",[["class","stepper-right tab-content p-3"],["id","v-pills-tabContent"]],null,null,null,null,null)),(l()(),u.sb(22,0,null,null,64,"div",[["aria-labelledby","editSubject-tab"],["class","tab-pane fade show active"],["id","editSubject"],["role","tabpanel"]],null,null,null,null,null)),(l()(),u.sb(23,0,null,null,63,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var t=!0;return"submit"===n&&(t=!1!==u.Eb(l,25).onSubmit(e)&&t),"reset"===n&&(t=!1!==u.Eb(l,25).onReset()&&t),t}),null,null)),u.rb(24,16384,null,0,O.D,[],null,null),u.rb(25,540672,null,0,O.i,[[8,null],[8,null]],{form:[0,"form"]},null),u.Jb(2048,null,O.c,null,[O.i]),u.rb(27,16384,null,0,O.q,[[4,O.c]],null,null),(l()(),u.sb(28,0,null,null,14,"div",[["class","form-group mb-2 col-xxl-6"]],null,null,null,null,null)),(l()(),u.sb(29,0,null,null,1,"label",[["class","col-form-label"],["for","subjectName"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Subject name*"])),(l()(),u.sb(31,0,null,null,9,"input",[["class","form-control"],["formControlName","generalSubjectName"],["id","subjectName"],["inputRestriction","alphabetsWithSpace"],["maxlength","50"],["minlength","3"],["placeholder","Enter subject name (min length: 3, max length: 50)"],["type","text"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"keypress"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,32)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,32).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,32)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,32)._compositionEnd(e.target.value)&&t),"keypress"===n&&(t=!1!==u.Eb(l,40).onKeyPress(e)&&t),t}),null,null)),u.rb(32,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(33,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(34,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(37,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(39,16384,null,0,O.p,[[4,O.o]],null,null),u.rb(40,16384,null,0,D.a,[u.k],{inputRestriction:[0,"inputRestriction"]},null),(l()(),u.sb(41,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Allowed characters - Alphabets"])),(l()(),u.sb(43,0,null,null,15,"div",[["class","form-group mb-2 col-xxl-6"]],null,null,null,null,null)),(l()(),u.sb(44,0,null,null,3,"label",[["class"," col-form-label"],["for","description"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Description "])),(l()(),u.sb(46,0,null,null,1,"span",[["class","text-muted"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["(Optional)"])),(l()(),u.sb(48,0,null,null,8,"textarea",[["class","form-control description-form"],["formControlName","generalSubjectDescription"],["id","description"],["maxlength","250"],["minlength","3"],["name","description"],["placeholder","Enter description  (min length: 3, max length: 250)"]],[[1,"minlength",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var t=!0;return"input"===n&&(t=!1!==u.Eb(l,49)._handleInput(e.target.value)&&t),"blur"===n&&(t=!1!==u.Eb(l,49).onTouched()&&t),"compositionstart"===n&&(t=!1!==u.Eb(l,49)._compositionStart()&&t),"compositionend"===n&&(t=!1!==u.Eb(l,49)._compositionEnd(e.target.value)&&t),t}),null,null)),u.rb(49,16384,null,0,O.d,[u.D,u.k,[2,O.a]],null,null),u.rb(50,540672,null,0,O.l,[],{minlength:[0,"minlength"]},null),u.rb(51,540672,null,0,O.k,[],{maxlength:[0,"maxlength"]},null),u.Jb(1024,null,O.m,(function(l,n){return[l,n]}),[O.l,O.k]),u.Jb(1024,null,O.n,(function(l){return[l]}),[O.d]),u.rb(54,671744,null,0,O.h,[[3,O.c],[6,O.m],[8,null],[6,O.n],[2,O.B]],{name:[0,"name"]},null),u.Jb(2048,null,O.o,null,[O.h]),u.rb(56,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(57,0,null,null,1,"div",[["class","text-muted font-15 my-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Allowed characters - Alphabets, Numbers and Special characters "])),(l()(),u.sb(59,0,null,null,22,"div",[["class","form-group mb-2 col-xxl-6"]],null,null,null,null,null)),(l()(),u.sb(60,0,null,null,1,"label",[["class"," col-form-label"],["for","description"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Grade* "])),(l()(),u.sb(62,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["placeholder","Select grade"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,64).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedSubjectGrade=e)&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(64,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],items:[2,"items"]},null),u.Kb(603979776,1,{optionTemplate:0}),u.Kb(603979776,2,{optgroupTemplate:0}),u.Kb(603979776,3,{labelTemplate:0}),u.Kb(603979776,4,{multiLabelTemplate:0}),u.Kb(603979776,5,{headerTemplate:0}),u.Kb(603979776,6,{footerTemplate:0}),u.Kb(603979776,7,{notFoundTemplate:0}),u.Kb(603979776,8,{typeToSearchTemplate:0}),u.Kb(603979776,9,{loadingTextTemplate:0}),u.Kb(603979776,10,{tagTemplate:0}),u.Kb(603979776,11,{loadingSpinnerTemplate:0}),u.Kb(603979776,12,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(78,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),u.Hb(79,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(81,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.sb(82,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(83,0,null,null,3,"div",[["class","col-md-12 d-flex justify-content-end"]],null,null,null,null,null)),(l()(),u.sb(84,0,null,null,2,"button",[["class","btn btn-success next-step"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.updateSubjectTree()&&u),u}),null,null)),(l()(),u.Mb(-1,null,[" Next "])),(l()(),u.sb(86,0,null,null,0,"i",[["class","fa fa-arrow-right ml-2"]],null,null,null,null,null)),(l()(),u.sb(87,0,null,null,35,"div",[["aria-labelledby","manageConcept-tab"],["class","tab-pane fade"],["id","manageConcept"],["role","tabpanel"]],null,null,null,null,null)),(l()(),u.sb(88,0,null,null,13,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(89,0,null,null,4,"div",[["class","col-xxl-4 p-2"]],null,null,null,null,null)),(l()(),u.sb(90,0,null,null,2,"div",[["class","d-flex justify-content-start mb-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,al)),u.rb(92,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(93,0,null,null,0,"div",[["id","buildTree"]],null,null,null,null,null)),(l()(),u.sb(94,0,null,null,7,"div",[["class","col-xxl-8"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,rl)),u.rb(96,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(97,0,null,null,4,"div",[["class","w-100 p-4"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,cl)),u.rb(99,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,dl)),u.rb(101,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(102,0,null,null,12,"div",[["class","my-2 p-3 border-danger rounded"]],null,null,null,null,null)),(l()(),u.sb(103,0,null,null,2,"p",[["class","text-danger"]],null,null,null,null,null)),(l()(),u.sb(104,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["NOTE"])),(l()(),u.sb(106,0,null,null,2,"p",[["class","text-primary"]],null,null,null,null,null)),(l()(),u.sb(107,0,null,null,0,"i",[["class","fa fa-check mr-2 text-danger"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Select a node and do your actions. "])),(l()(),u.sb(109,0,null,null,2,"p",[["class","text-primary"]],null,null,null,null,null)),(l()(),u.sb(110,0,null,null,0,"i",[["class","fa fa-check mr-2 text-danger"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Without any changes, you can't update general subject. "])),(l()(),u.sb(112,0,null,null,2,"p",[["class","text-primary"]],null,null,null,null,null)),(l()(),u.sb(113,0,null,null,0,"i",[["class","fa fa-check mr-2 text-danger"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Only one root node is allowed, you can't do drag and drop on top of root node "])),(l()(),u.sb(115,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(116,0,null,null,6,"div",[["class","col-md-12 d-flex justify-content-end"]],null,null,null,null,null)),(l()(),u.sb(117,0,null,null,2,"div",[["class","btn btn-danger prev-step"]],null,null,null,null,null)),(l()(),u.sb(118,0,null,null,0,"i",[["class","fa fa-arrow-left mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Previous "])),(l()(),u.sb(120,0,null,null,2,"button",[["class","btn btn-success ml-2 next-step"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.loadUpdatedJsonTree()&&u),u}),null,null)),(l()(),u.Mb(-1,null,[" Next "])),(l()(),u.sb(122,0,null,null,0,"i",[["class","fa fa-arrow-right ml-2"]],null,null,null,null,null)),(l()(),u.sb(123,0,null,null,21,"div",[["aria-labelledby","confirmation-tab"],["class","tab-pane fade"],["id","confirmation"],["role","tabpanel"]],null,null,null,null,null)),(l()(),u.sb(124,0,null,null,9,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),u.sb(125,0,null,null,8,"div",[["class","row mb-3"]],null,null,null,null,null)),(l()(),u.sb(126,0,null,null,3,"div",[["class","col-md-6"]],null,null,null,null,null)),(l()(),u.sb(127,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Before changes"])),(l()(),u.sb(129,0,null,null,0,"div",[["id","beforeChangeTree"]],null,null,null,null,null)),(l()(),u.sb(130,0,null,null,3,"div",[["class","col-md-6"]],null,null,null,null,null)),(l()(),u.sb(131,0,null,null,1,"h5",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["After changes"])),(l()(),u.sb(133,0,null,null,0,"div",[["id","afterChangeTree"]],null,null,null,null,null)),(l()(),u.sb(134,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),u.sb(135,0,null,null,9,"div",[["class","col-md-12 d-flex justify-content-end"]],null,null,null,null,null)),(l()(),u.sb(136,0,null,null,2,"span",[["class","btn btn-danger mr-2 prev-step"]],null,null,null,null,null)),(l()(),u.sb(137,0,null,null,0,"i",[["class","fa fa-arrow-left mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Previous "])),(l()(),u.sb(139,0,null,null,2,"div",[["class","btn btn-info mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.saveAsDraft()&&u),u}),null,null)),(l()(),u.sb(140,0,null,null,0,"i",[["class","fa fa-save mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Save as draft "])),(l()(),u.sb(142,0,null,null,2,"div",[["class","btn btn-success"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.saveAndPublish()&&u),u}),null,null)),(l()(),u.sb(143,0,null,null,0,"i",[["class","fe fe-file-plus mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Save and publish "])),(l()(),u.sb(145,0,null,null,45,"div",[["class","modal"],["id","generalSubjectModal"],["role","dialog"],["tabindex","-1"]],null,null,null,null,null)),(l()(),u.sb(146,0,null,null,44,"div",[["class","modal-dialog modal-full-height modal-right modal-notify"],["role","document"]],null,null,null,null,null)),(l()(),u.sb(147,0,null,null,43,"div",[["class","modal-content"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var t=!0;return"submit"===n&&(t=!1!==u.Eb(l,148).onSubmit(e)&&t),"reset"===n&&(t=!1!==u.Eb(l,148).onReset()&&t),t}),null,null)),u.rb(148,540672,null,0,O.i,[[8,null],[8,null]],{form:[0,"form"]},null),u.Jb(2048,null,O.c,null,[O.i]),u.rb(150,16384,null,0,O.q,[[4,O.c]],null,null),(l()(),u.sb(151,0,null,null,4,"div",[["class","modal-header bg-warning d-flex align-items-center"]],null,null,null,null,null)),(l()(),u.sb(152,0,null,null,1,"h5",[["class","modal-title text-white"]],null,null,null,null,null)),(l()(),u.Mb(153,null,[" "," concept / topic "])),(l()(),u.sb(154,0,null,null,1,"div",[["class","close btn btn-xl"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.closeWithOutSavingNode()&&u),u}),null,null)),(l()(),u.sb(155,0,null,null,0,"i",[["class","fa fa-times"]],null,null,null,null,null)),(l()(),u.sb(156,0,null,null,32,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),u.sb(157,0,null,null,31,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var t=!0;return"submit"===n&&(t=!1!==u.Eb(l,159).onSubmit(e)&&t),"reset"===n&&(t=!1!==u.Eb(l,159).onReset()&&t),t}),null,null)),u.rb(158,16384,null,0,O.D,[],null,null),u.rb(159,540672,null,0,O.i,[[8,null],[8,null]],{form:[0,"form"]},null),u.Jb(2048,null,O.c,null,[O.i]),u.rb(161,16384,null,0,O.q,[[4,O.c]],null,null),(l()(),u.sb(162,0,null,null,22,"div",[["class","form-group mb-2"]],null,null,null,null,null)),(l()(),u.sb(163,0,null,null,1,"label",[["class","col-form-label"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Type "])),(l()(),u.sb(165,0,null,null,19,"ng-select",[["bindLabel","name"],["class","ng-select"],["placeholder","Select node type"],["role","listbox"]],[[2,"ng-select-single",null],[2,"ng-select-typeahead",null],[2,"ng-select-multiple",null],[2,"ng-select-taggable",null],[2,"ng-select-searchable",null],[2,"ng-select-clearable",null],[2,"ng-select-opened",null],[2,"ng-select-disabled",null],[2,"ng-select-filtered",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"keydown"]],(function(l,n,e){var t=!0,a=l.component;return"keydown"===n&&(t=!1!==u.Eb(l,167).handleKeyDown(e)&&t),"ngModelChange"===n&&(t=!1!==(a.selectedNodeType=e)&&t),"change"===n&&(t=!1!==a.onNodeTypeChange()&&t),t}),A.b,A.a)),u.Jb(4608,null,I.f,I.f,[]),u.rb(167,4964352,null,12,I.a,[[8,null],[8,null],I.b,I.d,u.k,u.h,I.j],{bindLabel:[0,"bindLabel"],placeholder:[1,"placeholder"],searchable:[2,"searchable"],items:[3,"items"]},{changeEvent:"change"}),u.Kb(603979776,13,{optionTemplate:0}),u.Kb(603979776,14,{optgroupTemplate:0}),u.Kb(603979776,15,{labelTemplate:0}),u.Kb(603979776,16,{multiLabelTemplate:0}),u.Kb(603979776,17,{headerTemplate:0}),u.Kb(603979776,18,{footerTemplate:0}),u.Kb(603979776,19,{notFoundTemplate:0}),u.Kb(603979776,20,{typeToSearchTemplate:0}),u.Kb(603979776,21,{loadingTextTemplate:0}),u.Kb(603979776,22,{tagTemplate:0}),u.Kb(603979776,23,{loadingSpinnerTemplate:0}),u.Kb(603979776,24,{ngOptions:1}),u.Jb(1024,null,O.n,(function(l){return[l]}),[I.a]),u.rb(181,671744,null,0,O.s,[[2,O.c],[8,null],[8,null],[6,O.n]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),u.Hb(182,{standalone:0}),u.Jb(2048,null,O.o,null,[O.s]),u.rb(184,16384,null,0,O.p,[[4,O.o]],null,null),(l()(),u.ib(16777216,null,null,1,null,bl)),u.rb(186,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,pl)),u.rb(188,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,hl)),u.rb(190,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,25,0,e.generalSubjectForm),l(n,33,0,"3"),l(n,34,0,"50"),l(n,37,0,"generalSubjectName"),l(n,40,0,"alphabetsWithSpace"),l(n,50,0,"3"),l(n,51,0,"250"),l(n,54,0,"generalSubjectDescription"),l(n,64,0,"name","Select grade",e.allGrades);var u=e.selectedSubjectGrade,t=l(n,79,0,!0);l(n,78,0,u,t),l(n,92,0,e.generalSubject.length>1),l(n,96,0,e.enableNodeOperation),l(n,99,0,"concept"===e.nodeType),l(n,101,0,"topic"===e.nodeType),l(n,148,0,e.conceptAndTopicForm),l(n,159,0,e.conceptAndTopicForm),l(n,167,0,"name","Select node type",!1,e.nodeTypes);var a=e.disableDropdown,i=e.selectedNodeType,s=l(n,182,0,!0);l(n,181,0,a,i,s),l(n,186,0,"concept"===e.nodeType),l(n,188,0,"topic"===e.nodeType),l(n,190,0,e.enableModalOperation)}),(function(l,n){var e=n.component;l(n,23,0,u.Eb(n,27).ngClassUntouched,u.Eb(n,27).ngClassTouched,u.Eb(n,27).ngClassPristine,u.Eb(n,27).ngClassDirty,u.Eb(n,27).ngClassValid,u.Eb(n,27).ngClassInvalid,u.Eb(n,27).ngClassPending),l(n,31,0,u.Eb(n,33).minlength?u.Eb(n,33).minlength:null,u.Eb(n,34).maxlength?u.Eb(n,34).maxlength:null,u.Eb(n,39).ngClassUntouched,u.Eb(n,39).ngClassTouched,u.Eb(n,39).ngClassPristine,u.Eb(n,39).ngClassDirty,u.Eb(n,39).ngClassValid,u.Eb(n,39).ngClassInvalid,u.Eb(n,39).ngClassPending),l(n,48,0,u.Eb(n,50).minlength?u.Eb(n,50).minlength:null,u.Eb(n,51).maxlength?u.Eb(n,51).maxlength:null,u.Eb(n,56).ngClassUntouched,u.Eb(n,56).ngClassTouched,u.Eb(n,56).ngClassPristine,u.Eb(n,56).ngClassDirty,u.Eb(n,56).ngClassValid,u.Eb(n,56).ngClassInvalid,u.Eb(n,56).ngClassPending),l(n,62,1,[!u.Eb(n,64).multiple,u.Eb(n,64).typeahead,u.Eb(n,64).multiple,u.Eb(n,64).addTag,u.Eb(n,64).searchable,u.Eb(n,64).clearable,u.Eb(n,64).isOpen,u.Eb(n,64).disabled,u.Eb(n,64).filtered,u.Eb(n,81).ngClassUntouched,u.Eb(n,81).ngClassTouched,u.Eb(n,81).ngClassPristine,u.Eb(n,81).ngClassDirty,u.Eb(n,81).ngClassValid,u.Eb(n,81).ngClassInvalid,u.Eb(n,81).ngClassPending]),l(n,84,0,e.validateSubjectForm),l(n,120,0,e.validateNode),l(n,147,0,u.Eb(n,150).ngClassUntouched,u.Eb(n,150).ngClassTouched,u.Eb(n,150).ngClassPristine,u.Eb(n,150).ngClassDirty,u.Eb(n,150).ngClassValid,u.Eb(n,150).ngClassInvalid,u.Eb(n,150).ngClassPending),l(n,153,0,e.modalTitleName),l(n,157,0,u.Eb(n,161).ngClassUntouched,u.Eb(n,161).ngClassTouched,u.Eb(n,161).ngClassPristine,u.Eb(n,161).ngClassDirty,u.Eb(n,161).ngClassValid,u.Eb(n,161).ngClassInvalid,u.Eb(n,161).ngClassPending),l(n,165,1,[!u.Eb(n,167).multiple,u.Eb(n,167).typeahead,u.Eb(n,167).multiple,u.Eb(n,167).addTag,u.Eb(n,167).searchable,u.Eb(n,167).clearable,u.Eb(n,167).isOpen,u.Eb(n,167).disabled,u.Eb(n,167).filtered,u.Eb(n,184).ngClassUntouched,u.Eb(n,184).ngClassTouched,u.Eb(n,184).ngClassPristine,u.Eb(n,184).ngClassDirty,u.Eb(n,184).ngClassValid,u.Eb(n,184).ngClassInvalid,u.Eb(n,184).ngClassPending])}))}var ml=u.ob("ng-component",nl,(function(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"ng-component",[],null,null,null,gl,el)),u.Jb(512,null,h.a,h.a,[g.c]),u.Jb(512,null,m.a,m.a,[f.a,u.q]),u.rb(3,12697600,null,0,nl,[r.k,O.e,f.a,F.a,h.a,r.a,_.a,u.h,m.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),fl=function(){function l(n,e,u,t,a,i){_classCallCheck(this,l),this.pluginService=n,this.curriculumService=e,this.generalSubjectService=u,this.activatedRoute=t,this.router=a,this.errorHandler=i,this.generalSubject=[],this.active=!1}return _createClass(l,[{key:"ngOnInit",value:function(){var l=this;this.pluginService.sideMenuToggle(),this.activatedRoute.data.subscribe((function(n){var e=n.generalSubject;l.generalSubject=e,l.updateGeneralSubjectValues(e)})),this.getCurriculumList()}},{key:"updateGeneralSubjectValues",value:function(l){this.generalSubject=l,this.pluginService.jsTree("#treeView",this.generalSubject,!1),this.subjectId=this.generalSubject[0].data.id}},{key:"showConceptAndTopicDetails",value:function(){var l=this;$("#treeView").on("changed.jstree",(function(n,e){var u,t,a;for(u=0,t=e.selected.length;u<t;u++)l.nodeType=e.node.type,"root"===l.nodeType?(l.nodeName=e.node.data.name,l.nodeDescription=e.node.data.description,l.grade=e.node.data.baseGrade):"concept"===l.nodeType?(l.nodeName=e.node.data.name,l.nodeDescription=e.node.data.description):"topic"===l.nodeType?(l.nodeName=e.node.data.name,l.nodeDescription=e.node.data.description,l.curriculum=null===(a=e.node.data.baseCurriculumId)?null:l.curriculumList.find((function(l){return l.id===a})).acronym,l.grade=e.node.data.baseGrade):l.nodeType=""}))}},{key:"ngAfterViewInit",value:function(){this.showConceptAndTopicDetails()}},{key:"toggleTreeNodes",value:function(){this.active=!this.active,this.active?this.pluginService.openJsTreeAllNodes("#treeView"):this.pluginService.closeJsTreeAllNodes("#treeView")}},{key:"getCurriculumList",value:function(){var l=this;this.curriculumService.getStandardCurriculums().subscribe((function(n){return l.assignResponseToList(n.body)}),(function(n){return l.onError(n)}))}},{key:"assignResponseToList",value:function(l){this.curriculumList=l}},{key:"onError",value:function(l){this.errorHandler.handleError(l)}},{key:"onBack",value:function(){var l=this;swal({title:"Are you sure to go previous page ?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",confirmButtonColor:"#32b432",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},(function(n){n&&(l.previousUrl(),l.pluginService.sideMenuToggle())}))}},{key:"previousUrl",value:function(){this.router.navigateByUrl("/general-subject")}}]),l}(),vl=u.qb({encapsulation:2,styles:[],data:{}});function Tl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Expand all "]))],null,null)}function yl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Collapse all "]))],null,null)}function Cl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,6,"div",[["class","d-flex justify-content-start mb-2"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,5,"div",[["class","btn btn-primary mr-2"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.toggleTreeNodes()&&u),u}),null,null)),(l()(),u.sb(2,0,null,null,0,"i",[["class","fa fa-clone mr-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,Tl)),u.rb(4,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,yl)),u.rb(6,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,4,0,!1===e.active),l(n,6,0,!0===e.active)}),null)}function Sl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,8,"div",[["class","d-flex justify-content-start badge-lightBlue rounded p-2 mb-2"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" NOTE : "])),(l()(),u.sb(3,0,null,null,0,"i",[["class","fa fa-book ml-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" - Subject,"])),(l()(),u.sb(5,0,null,null,0,"i",[["class","fa fa-sitemap ml-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" - Concept, "])),(l()(),u.sb(7,0,null,null,0,"i",[["class","fa fa-file ml-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" - Topic "]))],null,null)}function El(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,15,"div",[["class","p-3"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Subject name"])),(l()(),u.sb(4,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(5,null,["",""])),(l()(),u.sb(6,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(7,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Subject description"])),(l()(),u.sb(9,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(10,null,["",""])),(l()(),u.sb(11,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(12,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Grade"])),(l()(),u.sb(14,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(15,null,["",""]))],null,(function(l,n){var e=n.component;l(n,5,0,e.nodeName),l(n,10,0,e.nodeDescription),l(n,15,0,e.grade)}))}function kl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,10,"div",[["class","p-3"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept name"])),(l()(),u.sb(4,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(5,null,["",""])),(l()(),u.sb(6,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(7,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Concept description"])),(l()(),u.sb(9,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(10,null,["",""]))],null,(function(l,n){var e=n.component;l(n,5,0,e.nodeName),l(n,10,0,e.nodeDescription)}))}function jl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,22,"div",[["class","p-3"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,21,"div",[["class","d-flex w-100 justify-content-between mb-3"]],null,null,null,null,null)),(l()(),u.sb(2,0,null,null,20,"div",[],null,null,null,null,null)),(l()(),u.sb(3,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(4,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic name"])),(l()(),u.sb(6,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(7,null,["",""])),(l()(),u.sb(8,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(9,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Topic description"])),(l()(),u.sb(11,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(12,null,["",""])),(l()(),u.sb(13,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(14,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Curriculum"])),(l()(),u.sb(16,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(17,null,["",""])),(l()(),u.sb(18,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.sb(19,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Grade"])),(l()(),u.sb(21,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Mb(22,null,["",""]))],null,(function(l,n){var e=n.component;l(n,7,0,e.nodeName),l(n,12,0,e.nodeDescription),l(n,17,0,e.curriculum),l(n,22,0,e.grade)}))}function Nl(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,8,"div",[["class","w-100 my-3 justify-content-between d-flex"]],null,null,null,null,null)),(l()(),u.sb(1,0,null,null,2,"div",[["class","btn btn-danger"]],null,[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.onBack()&&u),u}),null,null)),(l()(),u.sb(2,0,null,null,0,"i",[["class","fa fa-chevron-left mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,[" Back "])),(l()(),u.sb(4,0,null,null,4,"a",[["class","btn btn-success mr-2"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.Eb(l,5).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&t),t}),null,null)),u.rb(5,671744,null,0,r.n,[r.k,r.a,c.j],{routerLink:[0,"routerLink"]},null),u.Fb(6,3),(l()(),u.sb(7,0,null,null,0,"i",[["class","fa fa-edit mr-2"]],null,null,null,null,null)),(l()(),u.Mb(-1,null,["Edit general subject "])),(l()(),u.sb(9,0,null,null,14,"div",[["class","row mb-3 p-3"]],null,null,null,null,null)),(l()(),u.sb(10,0,null,null,4,"div",[["class","col-xxl-4 mb-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,Cl)),u.rb(12,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.sb(13,0,null,null,1,"div",[["class","tree-scroll"]],null,null,null,null,null)),(l()(),u.sb(14,0,null,null,0,"div",[["id","treeView"]],null,null,null,null,null)),(l()(),u.sb(15,0,null,null,8,"div",[["class","col-xxl-8 mb-2"]],null,null,null,null,null)),(l()(),u.ib(16777216,null,null,1,null,Sl)),u.rb(17,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,El)),u.rb(19,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,kl)),u.rb(21,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.ib(16777216,null,null,1,null,jl)),u.rb(23,16384,null,0,c.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component,u=l(n,6,0,"/general-subject",e.subjectId,"edit");l(n,5,0,u),l(n,12,0,e.generalSubject.length>1),l(n,17,0,e.generalSubject.length>1),l(n,19,0,"root"==e.nodeType),l(n,21,0,"concept"==e.nodeType),l(n,23,0,"topic"==e.nodeType)}),(function(l,n){l(n,4,0,u.Eb(n,5).target,u.Eb(n,5).href)}))}var xl=u.ob("ng-component",fl,(function(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"ng-component",[],null,null,null,Nl,vl)),u.Jb(512,null,h.a,h.a,[g.c]),u.Jb(512,null,m.a,m.a,[f.a,u.q]),u.rb(3,4308992,null,0,fl,[f.a,F.a,h.a,r.a,r.k,m.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),Ml=function(){function l(n,e,u,t,a,i){_classCallCheck(this,l),this.router=n,this.activatedRoute=e,this.eventManager=u,this.generalSubjectService=t,this.pluginService=a,this.errorHandler=i}return _createClass(l,[{key:"ngOnInit",value:function(){var l=this;this.activatedRoute.data.subscribe((function(n){var e=n.generalSubject;l.deletegeneralSubject(e)}))}},{key:"subscribeToDeleteResponse",value:function(l){var n=this;l.subscribe((function(l){return n.onDeleteSuccess(l)}),(function(l){return n.onError(l)}))}},{key:"deletegeneralSubject",value:function(l){var n=this;swal({title:"Are you sure to delete this general subject ?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",confirmButtonColor:"#32b432",cancelButtonText:"No",closeOnConfirm:!1,closeOnCancel:!0},(function(e){e?n.confirmDelete(l.id):n.previousUrl()}))}},{key:"confirmDelete",value:function(l){this.subscribeToDeleteResponse(this.generalSubjectService.delete(l))}},{key:"previousUrl",value:function(){this.router.navigateByUrl("/general-subject")}},{key:"onDeleteSuccess",value:function(l){this.pluginService.alertMessage("General subject deleted successfully","success"),this.previousUrl()}},{key:"onError",value:function(l){this.errorHandler.handleError(l)}}]),l}(),Ol=u.qb({encapsulation:2,styles:[],data:{}});function Dl(l){return u.Ob(0,[],null,null)}var Al=u.ob("ng-component",Ml,(function(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"ng-component",[],null,null,null,Dl,Ol)),u.Jb(512,null,h.a,h.a,[g.c]),u.Jb(512,null,m.a,m.a,[f.a,u.q]),u.rb(3,114688,null,0,Ml,[r.k,r.a,b.c,h.a,f.a,m.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),Il=function(){function l(n,e,u,t,a){_classCallCheck(this,l),this.router=n,this.activatedRoute=e,this.generalSubjectService=u,this.pluginService=t,this.errorHandler=a}return _createClass(l,[{key:"ngOnInit",value:function(){var l=this;this.activatedRoute.data.subscribe((function(n){var e=n.generalSubject;l.publishGeneralSubject(e)}))}},{key:"subscribeToSaveResponse",value:function(l){var n=this;l.subscribe((function(l){return n.onSaveSuccess(l)}),(function(l){return n.onError(l)}))}},{key:"publishGeneralSubject",value:function(l){l.status=w.a,this.subscribeToSaveResponse(this.generalSubjectService.updateGeneralSubjectStatus(l)),this.router.navigateByUrl("/general-subject")}},{key:"onSaveSuccess",value:function(l){l.body.status===w.a&&this.pluginService.alertMessage("General subject published successfully","success")}},{key:"onError",value:function(l){this.errorHandler.handleError(l)}}]),l}(),wl=u.qb({encapsulation:2,styles:[],data:{}});function _l(l){return u.Ob(0,[],null,null)}var Fl=u.ob("ng-component",Il,(function(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"ng-component",[],null,null,null,_l,wl)),u.Jb(512,null,h.a,h.a,[g.c]),u.Jb(512,null,m.a,m.a,[f.a,u.q]),u.rb(3,114688,null,0,Il,[r.k,r.a,h.a,f.a,m.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),Ll=function(){function l(n,e,u,t,a){_classCallCheck(this,l),this.router=n,this.activatedRoute=e,this.generalSubjectService=u,this.pluginService=t,this.errorHandler=a}return _createClass(l,[{key:"ngOnInit",value:function(){var l=this;this.activatedRoute.data.subscribe((function(n){var e=n.generalSubject;l.unpublishGeneralSubject(e)}))}},{key:"subscribeToSaveResponse",value:function(l){var n=this;l.subscribe((function(l){return n.onSaveSuccess(l)}),(function(l){return n.onError(l)}))}},{key:"unpublishGeneralSubject",value:function(l){l.status=w.f,this.subscribeToSaveResponse(this.generalSubjectService.updateGeneralSubjectStatus(l)),this.router.navigateByUrl("/general-subject")}},{key:"onSaveSuccess",value:function(l){l.body.status===w.f&&this.pluginService.alertMessage("General subject unpublished successfully","success")}},{key:"onError",value:function(l){this.errorHandler.handleError(l)}}]),l}(),Jl=u.qb({encapsulation:2,styles:[],data:{}});function Kl(l){return u.Ob(0,[],null,null)}var Gl,Vl,Bl=u.ob("ng-component",Ll,(function(l){return u.Ob(0,[(l()(),u.sb(0,0,null,null,3,"ng-component",[],null,null,null,Kl,Jl)),u.Jb(512,null,h.a,h.a,[g.c]),u.Jb(512,null,m.a,m.a,[f.a,u.q]),u.rb(3,114688,null,0,Ll,[r.k,r.a,h.a,f.a,m.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),Pl=e("Mc5n"),Rl=e("hOhj"),Ul=e("qd05"),$l=e("0uJq"),Wl=e("ustg"),ql=e("ELM3"),Hl=e("aV0t"),Yl=e("G0yt"),Xl=e("etoB"),Ql=e("XKba"),zl=e("r+aY"),Zl=e("PCNd"),ln=e("LRne"),nn=e("pLZG"),en=e("lJxs"),un=function l(n,e,u,t,a,i,s,o,r,c,d,b,p,h,g,m,f,v,T){_classCallCheck(this,l),this.id=n,this.title=e,this.description=u,this.status=t,this.data=a,this.icon=i,this.parent=s,this.disabled=o,this.text=r,this.type=c,this.state=d,this.a_attr=b,this.li_attr=p,this.curriculumID=h,this.name=g,this.acronym=m,this.gradesApplicableFrom=f,this.gradesApplicableTo=v,this.grades=T},tn=((Vl=function(){function l(n){_classCallCheck(this,l),this.service=n}return _createClass(l,[{key:"resolve",value:function(l,n){var e=l.params.id?l.params.id:null;return e?this.service.getSubjectBySubjectId(e).pipe(Object(nn.a)((function(l){return l.ok})),Object(en.a)((function(l){return l.body}))):Object(ln.a)(new un)}}]),l}()).ngInjectableDef=u.Sb({factory:function(){return new Vl(u.Tb(h.a))},token:Vl,providedIn:"root"}),Vl),an=((Gl=function(){function l(n){_classCallCheck(this,l),this.service=n}return _createClass(l,[{key:"resolve",value:function(l,n){var e=l.params.id?l.params.id:null;return e?this.service.getSubjectTreeBySubjectId(e).pipe(Object(nn.a)((function(l){return l.ok})),Object(en.a)((function(l){return l.body}))):Object(ln.a)(new un)}}]),l}()).ngInjectableDef=u.Sb({factory:function(){return new Gl(u.Tb(h.a))},token:Gl,providedIn:"root"}),Gl),sn={authorities:["SYSTEM_ADMIN"],pageTitle:"Manage general subjects"},on={authorities:["SYSTEM_ADMIN"],pageTitle:"Create new general subject"},rn={authorities:["SYSTEM_ADMIN"],pageTitle:"Edit general subject",action:"edit"},cn={authorities:["SYSTEM_ADMIN"],pageTitle:"View general subject"},dn={authorities:["SYSTEM_ADMIN"],pageTitle:"Delete general subject"},bn={authorities:["SYSTEM_ADMIN"],pageTitle:"Publish general subject",action:"publish"},pn={authorities:["SYSTEM_ADMIN"],pageTitle:"Unpublish general subject",action:"unpublish"},hn=e("Blgc");e.d(n,"GeneralSubjectsModuleNgFactory",(function(){return gn}));var gn=u.pb(t,[],(function(l){return u.Bb([u.Cb(512,u.j,u.bb,[[8,[a.a,i.a,s.a,s.b,s.h,s.i,s.e,s.f,s.g,o.a,M,Z,ml,xl,Al,Fl,Bl]],[3,u.j],u.w]),u.Cb(4608,O.A,O.A,[]),u.Cb(4608,O.e,O.e,[]),u.Cb(4608,c.o,c.n,[u.t,[2,c.E]]),u.Cb(4608,Pl.f,Pl.f,[c.c,u.y,Rl.a,Pl.h]),u.Cb(4608,f.a,f.a,[]),u.Cb(4608,u.l,m.a,[f.a,u.q]),u.Cb(4608,Ul.a,Ul.a,[$l.d]),u.Cb(4608,m.a,m.a,[f.a,u.q]),u.Cb(4608,Wl.a,Wl.a,[g.c,ql.a,f.a,y.a,Ul.a,m.a]),u.Cb(4608,_.a,_.a,[g.c]),u.Cb(4608,Hl.a,Hl.a,[g.c]),u.Cb(4608,Yl.u,Yl.u,[u.j,u.q,Yl.eb,Yl.v]),u.Cb(4608,h.a,h.a,[g.c]),u.Cb(1073742336,r.o,r.o,[[2,r.t],[2,r.k]]),u.Cb(1073742336,O.z,O.z,[]),u.Cb(1073742336,O.j,O.j,[]),u.Cb(1073742336,O.w,O.w,[]),u.Cb(1073742336,c.b,c.b,[]),u.Cb(1073742336,I.c,I.c,[]),u.Cb(1073742336,Pl.g,Pl.g,[]),u.Cb(1073742336,Xl.a,Xl.a,[]),u.Cb(1073742336,Ql.b,Ql.b,[]),u.Cb(1073742336,d.c,d.c,[]),u.Cb(1073742336,zl.a,zl.a,[]),u.Cb(1073742336,Zl.a,Zl.a,[]),u.Cb(1073742336,Yl.c,Yl.c,[]),u.Cb(1073742336,Yl.g,Yl.g,[]),u.Cb(1073742336,Yl.h,Yl.h,[]),u.Cb(1073742336,Yl.l,Yl.l,[]),u.Cb(1073742336,Yl.m,Yl.m,[]),u.Cb(1073742336,Yl.r,Yl.r,[]),u.Cb(1073742336,Yl.s,Yl.s,[]),u.Cb(1073742336,Yl.w,Yl.w,[]),u.Cb(1073742336,Yl.A,Yl.A,[]),u.Cb(1073742336,Yl.D,Yl.D,[]),u.Cb(1073742336,Yl.G,Yl.G,[]),u.Cb(1073742336,Yl.J,Yl.J,[]),u.Cb(1073742336,Yl.M,Yl.M,[]),u.Cb(1073742336,Yl.Q,Yl.Q,[]),u.Cb(1073742336,Yl.R,Yl.R,[]),u.Cb(1073742336,Yl.S,Yl.S,[]),u.Cb(1073742336,Yl.x,Yl.x,[]),u.Cb(1073742336,b.k,b.k,[]),u.Cb(1073742336,p.b,p.b,[]),u.Cb(1073742336,t,t,[]),u.Cb(256,I.d,I.e,[]),u.Cb(1024,r.i,(function(){return[[{path:"",component:T,data:sn,canActivate:[hn.a]},{path:"create",component:L,data:on,canActivate:[hn.a]},{path:":id/edit",component:nl,resolve:{generalSubject:an},data:rn,canActivate:[hn.a]},{path:":id/view",component:fl,resolve:{generalSubject:an},data:cn,canActivate:[hn.a]},{path:":id/delete",component:Ml,resolve:{generalSubject:tn},data:dn,canActivate:[hn.a]},{path:":id/publish",component:Il,resolve:{generalSubject:tn},data:bn,canActivate:[hn.a]},{path:":id/unpublish",component:Ll,resolve:{generalSubject:tn},data:pn,canActivate:[hn.a]}]]}),[])])}))},tmov:function(l,n,e){"use strict";e.d(n,"a",(function(){return c}));var u=e("IheW"),t=e("AytR"),a=e("M0ag"),i=e("BN3N"),s=e("EBJu"),o=e("8Y7J"),r=new u.h;r=r.append("Access-Control-Allow-Origin","*").append("Access-Control-Allow-Headers","*");var c=function(){var l=function(){function l(n){_classCallCheck(this,l),this.http=n,this.generalSubjectResourceUrl=t.a.API_URL+s.p,this.generalSubjectSearchResourceUrl=t.a.API_URL+s.q,this.generalSubjectResourceUrlWithTree=t.a.API_URL+s.r}return _createClass(l,[{key:"getSubjectBySubjectId",value:function(l){return this.http.get("".concat(this.generalSubjectResourceUrl,"/").concat(l),{observe:"response"})}},{key:"getSubjectSearchList",value:function(){return this.http.post(this.generalSubjectSearchResourceUrl,{status:i.a},{observe:"response"})}},{key:"getSubjectListByGrade",value:function(l,n){return this.http.post(this.generalSubjectSearchResourceUrl,{grade:l,status:n},{observe:"response"})}},{key:"getSubjectTreeBySubjectId",value:function(l){return this.http.get("".concat(this.generalSubjectResourceUrlWithTree,"/").concat(l),{observe:"response"})}},{key:"updateGeneralSubjectStatus",value:function(l){return this.http.put(this.generalSubjectResourceUrl,l,{observe:"response"})}},{key:"getAllSubjects",value:function(l){var n=Object(a.c)(l);return this.http.get(this.generalSubjectResourceUrl,{params:n,observe:"response"})}},{key:"delete",value:function(l){return this.http.delete("".concat(this.generalSubjectResourceUrl,"/").concat(l),{observe:"response"})}},{key:"saveGeneralSubject",value:function(l){return this.http.post(this.generalSubjectResourceUrlWithTree,l,{headers:r,observe:"response"})}}]),l}();return l.ngInjectableDef=o.Sb({factory:function(){return new l(o.Tb(u.c))},token:l,providedIn:"root"}),l}()}}]);